<html>
<head>
<title>What Are The Best Practices For Node.JS Development?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Node的最佳实践是什么？JS开发？</h1>
<blockquote>原文：<a href="https://medium.com/swlh/what-are-the-best-practices-for-node-js-development-88e8ad57e9cc#2017-10-06">https://medium.com/swlh/what-are-the-best-practices-for-node-js-development-88e8ad57e9cc#2017-10-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/2d96631317eadbf549c4db5508e9b820.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kUd13q7n0BRgMUvwcY36rw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">What Are The Best Practices For Node.JS Development</figcaption></figure><p id="a750" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi js translated">ode.js在JavaScript的广泛采用和流行中发挥了重要作用。基于谷歌V8 JavaScript引擎的<a class="ae kb" href="https://www.cognitiveclouds.com/insights/everything-you-need-to-know-about-node-js/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>的流行可以归功于它提供的开发环境的速度和效率。这个平台让你很容易上手，但是一旦你超越了应用的核心功能，知道如何处理错误和如何最好地组织你的代码就变得困难了。您如何解决这些问题，无论是东拼西凑还是基于正确的实践，都将决定一个发布灾难和一个坚如磐石的生产应用程序之间的差别。说到这里，让我们来看看一些Node.js技巧，它们将帮助您充分利用您的应用程序。</p><h2 id="6cbb" class="kc kd hi bd ke kf kg kh ki kj kk kl km jf kn ko kp jj kq kr ks jn kt ku kv kw bi translated">用NPM初始化开始所有项目</h2><p id="ff5f" class="pw-post-body-paragraph iu iv hi iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr hb bi translated">因为您可以使用npm脚本和节点更好地组织它们，所以停止编写bash脚本。Npm的init命令从工作目录中推断公共属性，将为您的项目构建一个有效的package.json。大多数人都知道NPM是一种安装依赖项的方法，但它远不止于此。Node Package Manager是node.js几乎所有部署系统的基础。它为您创建的新package.json允许您添加大量的<a class="ae kb" href="https://www.datadab.com" rel="noopener ugc nofollow" target="_blank">元数据</a>，通过让其他人拥有与您相同的设置来帮助其他人参与项目。这种简单、可靠的包管理使节点生态系统发展得非常好。</p><h2 id="4e1d" class="kc kd hi bd ke kf kg kh ki kj kk kl km jf kn ko kp jj kq kr ks jn kt ku kv kw bi translated">使用环境变量</h2><p id="acc4" class="pw-post-body-paragraph iu iv hi iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr hb bi translated">不要让您的项目与特定于环境的配置文件混杂在一起。相反，利用环境变量。即使在项目的早期阶段，也要利用环境变量来确保没有敏感信息的泄露，并且从一开始就正确地构建代码。配置管理总是一个需要讨论的问题。如何将他们的代码从数据库、服务等中分离出来？在<a class="ae kb" href="https://www.cognitiveclouds.com/custom-software-development-services/node-js-development-company" rel="noopener ugc nofollow" target="_blank"> node.js开发</a>、生产和QA期间必须使用哪个？Node.js中建议的方法是使用环境变量，并在代码中查找process.env中的值。</p><h2 id="43b2" class="kc kd hi bd ke kf kg kh ki kj kk kl km jf kn ko kp jj kq kr ks jn kt ku kv kw bi translated">使用样式指南</h2><p id="558e" class="pw-post-body-paragraph iu iv hi iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr hb bi translated">风格指南会让你成为一个更有效率的node.js开发者，因为它减少了不必要的选择。我们大多数人花了半天时间将空格改为制表符，将大括号重新格式化为其他行，当我们从另一个从未处理过的项目中打开一个新文件时，基本上试图理解代码。这里的问题是固执己见的开发人员和没有公司标准风格指南的混合体。当代码以一致的风格编写时，在代码基础上理解代码要容易得多。如果你应该用空格或制表符书写，它进一步减少了认知开销。如果这种风格被规定和执行，那么突然间，代码库就变得更容易管理了。有时候，最好是采用现有的一套指导方针并遵循它们，这样你也不必制定自己的规则。无论是Airbnb、谷歌、jQuery还是标准JS。</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lc"><img src="../Images/44c0d668880ab6191d1a6fe14fd1b918.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AlIYV4TLLD5xPUS_HGVRVA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx"><em class="lh">What Are The Best Practices for Node.js Development</em></figcaption></figure><h2 id="be11" class="kc kd hi bd ke kf kg kh ki kj kk kl km jf kn ko kp jj kq kr ks jn kt ku kv kw bi translated">熟悉JavaScript最佳实践</h2><p id="a886" class="pw-post-body-paragraph iu iv hi iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr hb bi translated">在制定Node.js策略之前，最好先确保自己已经掌握了JavaScript的最佳实践。如果您没有时间完全沉浸其中，或者您需要复习JavaScript，那么您应该学习的一些基准是异步编程、范围、数据类型、函数参数、JavaScript中的函数和对象以及回调。</p><h2 id="87f1" class="kc kd hi bd ke kf kg kh ki kj kk kl km jf kn ko kp jj kq kr ks jn kt ku kv kw bi translated">异步运行</h2><p id="8635" class="pw-post-body-paragraph iu iv hi iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr hb bi translated">Node.js在设计上是单线程的，这意味着许多同步组件可能会锁定整个应用程序。JavaScript中的同步函数会阻止任何其他代码运行，直到它们完成。然而，同步代码使得应用程序逻辑的流程易于理解。另一方面，像承诺这样的异步结构带回了很多这样的推理，同时使您的代码免受阻塞。即使您可以在代码中避免使用同步方法，但仍有可能无意中使用了具有阻塞调用的外部库，这可能会严重降低性能。解决这个问题的最好方法是在代码中使用异步API，尤其是在性能关键部分。在选择第三方模块时，请记住这一点，以确保外部库不会回复到同步调用。</p><h2 id="dd16" class="kc kd hi bd ke kf kg kh ki kj kk kl km jf kn ko kp jj kq kr ks jn kt ku kv kw bi translated">处理错误</h2><p id="cee6" class="pw-post-body-paragraph iu iv hi iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr hb bi translated">管理好异常对任何应用程序都很重要，处理错误的最佳方式是使用异步结构。例如，promises提供了一个. catch()处理程序，它将干净地传播所有要处理的错误。</p><h2 id="86c8" class="kc kd hi bd ke kf kg kh ki kj kk kl km jf kn ko kp jj kq kr ks jn kt ku kv kw bi translated">确保你的应用程序自动重启</h2><p id="22f5" class="pw-post-body-paragraph iu iv hi iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr hb bi translated">好的，所以你遵循最佳实践来处理错误。可悲的是，来自依赖关系的错误仍然会让你的应用程序宕机。这时就需要使用进程管理器来确保应用程序从运行时错误中正常恢复。现在，如果您运行的整个服务器宕机，您将再次需要它来重启。在这里，您需要最短的停机时间。您希望您的应用程序在服务器再次运行时立即重启。</p><h2 id="e524" class="kc kd hi bd ke kf kg kh ki kj kk kl km jf kn ko kp jj kq kr ks jn kt ku kv kw bi translated">将您的应用集群化，以提高可靠性和性能</h2><p id="fe0d" class="pw-post-body-paragraph iu iv hi iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr hb bi translated">默认情况下，Node.js在单个进程中运行。理想情况下，您希望每个CPU内核都有一个进程，这样就可以在所有内核之间分配工作负载。从而提高处理HTTP请求的web应用程序的可伸缩性和总体性能。除此之外，如果一个工作者崩溃，其他人仍然可以处理请求。需要记住的一点是，每个进程都是独立的，它们不共享资源或内存。即使您现在只是在小型硬件上运行单个进程，集群也能为您的未来带来轻松的灵活性。测试是了解应用程序集群进程理想数量的正确方法。然而，您可以从您的平台提供的合理的缺省值开始，进行简单的回退。</p><h2 id="1701" class="kc kd hi bd ke kf kg kh ki kj kk kl km jf kn ko kp jj kq kr ks jn kt ku kv kw bi translated">预先要求您的所有依赖项</h2><p id="3322" class="pw-post-body-paragraph iu iv hi iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr hb bi translated">总是加载所有的依赖项并预先配置它们。这样，您将从一开始就知道是否有任何问题，而不是在您的应用程序投入生产后的四五个小时。</p><h2 id="5f1a" class="kc kd hi bd ke kf kg kh ki kj kk kl km jf kn ko kp jj kq kr ks jn kt ku kv kw bi translated">使用Gzip压缩</h2><p id="91b6" class="pw-post-body-paragraph iu iv hi iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr hb bi translated">Gzip是一个用于文件解压缩和压缩的软件应用程序。今天，大多数客户机和服务器都支持gzip。当gzip兼容的浏览器请求资源时，服务器在将响应发送到浏览器之前对其进行压缩，从而减少时间延迟。如果在响应客户端和向远程服务器发出请求时都使用gzip，那么它可以提高应用程序的整体性能。</p><h2 id="e865" class="kc kd hi bd ke kf kg kh ki kj kk kl km jf kn ko kp jj kq kr ks jn kt ku kv kw bi translated">保持你的代码简洁</h2><p id="6f11" class="pw-post-body-paragraph iu iv hi iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr hb bi translated">保持Node.js代码库尽可能紧凑以减少延迟和加快速度是很重要的。下面是一些在开发阶段值得问的问题:“我们为什么要使用这个框架？值得开销吗？”，“我们真的需要这个模块吗？”“我们能不能尝试一种更简单的方法？”优化应用程序性能的一种方法是将多个JS文件缩小并连接成一个文件。例如，如果您的应用程序有六个JavaScript文件，浏览器将发出六个单独的HTTP请求来获取它们。更好的方法是将这六个文件缩小并连接成一个精简的文件，以避免阻塞和等待时间。</p><h2 id="f238" class="kc kd hi bd ke kf kg kh ki kj kk kl km jf kn ko kp jj kq kr ks jn kt ku kv kw bi translated">采用客户端渲染</h2><p id="d9e4" class="pw-post-body-paragraph iu iv hi iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr hb bi translated">由于BackboneJS和AngularJS等强大的新客户端MVC框架，开发人员创建动态的单页应用程序变得更加容易。这些框架公开了将JSON响应直接发送给客户机的API，而不是通过服务器。对于每个请求，如果您让Node.js在服务器端呈现，它将返回一个HTML页面。在Node.js环境中使用客户端呈现将极大地减少延迟并节省带宽。</p><h2 id="12a9" class="kc kd hi bd ke kf kg kh ki kj kk kl km jf kn ko kp jj kq kr ks jn kt ku kv kw bi translated">仅获取有效位</h2><p id="96ff" class="pw-post-body-paragraph iu iv hi iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr hb bi translated">大多数应用程序都由必需的文件和生成的文件组成。您应该避免跟踪在使用git这样的源代码控制系统时创建的任何东西。当您跟踪生成的文件时，这会导致git历史中不必要的膨胀和噪音。事实上，由于某些依赖项是原生的并且应该被编译，签入它们会降低应用程序的可移植性，因为您将提供来自单一的、可能不正确的架构的构建。</p><h2 id="47ca" class="kc kd hi bd ke kf kg kh ki kj kk kl km jf kn ko kp jj kq kr ks jn kt ku kv kw bi translated">应用程序监控</h2><p id="00ad" class="pw-post-body-paragraph iu iv hi iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr hb bi translated">当您的应用程序出现问题时，得到通知是非常重要的，尤其是在生产应用程序中。你不想查看你的社交媒体反馈，看到成千上万愤怒的用户告诉你你的服务器坏了，或者你的应用程序已经被破坏了几个小时。因此，利用一些东西来监控和提醒你关键问题或异常行为是很重要的。</p><h2 id="8436" class="kc kd hi bd ke kf kg kh ki kj kk kl km jf kn ko kp jj kq kr ks jn kt ku kv kw bi translated">测试您的代码</h2><p id="325f" class="pw-post-body-paragraph iu iv hi iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr hb bi translated">这一点是显而易见的，但是严肃地说，测试在很多情况下会拯救你。测试确实会阻碍你的开发速度。然而，一旦最初的几个生产问题发生在一个没有测试的项目上，你会希望你在一开始就运行了一些测试。无论你在项目的哪个阶段，引入测试都不会太晚。从小做起，从简单做起。</p><p id="08c3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">希望这证明有用。</p></div><div class="ab cl li lj gp lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hb hc hd he hf"><p id="a1e9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="lp">最初发表于CognitiveClouds的产品洞察博客:Top </em> <a class="ae kb" href="https://www.cognitiveclouds.com/custom-software-development-services/node-js-development-company" rel="noopener ugc nofollow" target="_blank"> <strong class="iw lq"> <em class="lp"> Node JS开发公司</em> </strong> </a></p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/731acf26f5d44fdc58d99a6388fe935d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6gfnVvkMRFtjVsWF7vkClA.png"/></div></div></figure><h2 id="fd41" class="kc kd hi bd ke kf kg kh ki kj kk kl km jf kn ko kp jj kq kr ks jn kt ku kv kw bi translated">这个故事发表在<a class="ae kb" href="https://medium.com/swlh" rel="noopener"> The Startup </a>上，这是Medium最大的企业家出版物，拥有293，189+人。</h2><h2 id="7945" class="kc kd hi bd ke kf kg kh ki kj kk kl km jf kn ko kp jj kq kr ks jn kt ku kv kw bi translated">在这里订阅接收<a class="ae kb" href="http://growthsupply.com/the-startup-newsletter/" rel="noopener ugc nofollow" target="_blank">我们的头条新闻</a>。</h2><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lr"><img src="../Images/731acf26f5d44fdc58d99a6388fe935d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6gfnVvkMRFtjVsWF7vkClA.png"/></div></div></figure></div></div>    
</body>
</html>