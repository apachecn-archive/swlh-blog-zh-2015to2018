<html>
<head>
<title>Getting an Uber ride with the Amazon dash button</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用亚马逊dash按钮乘坐优步</h1>
<blockquote>原文：<a href="https://medium.com/swlh/getting-a-uber-ride-using-the-amazon-dash-button-c4dcef42051c#2015-08-25">https://medium.com/swlh/getting-a-uber-ride-using-the-amazon-dash-button-c4dcef42051c#2015-08-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8989" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" rel="noopener" href="/@geoffrey___/summon-uber-with-the-new-amazon-dash-button-876b54385dec#.z9k5awmz3"> <strong class="ih je">见本文新AWS物联网按钮</strong> </a>的改进版本</p><p id="374e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个周末，我从<a class="ae jd" rel="noopener" href="/@edwardbenson/how-i-hacked-amazon-s-5-wifi-button-to-track-baby-data-794214b0bdd8">这篇很棒的帖子</a>中得到灵感，决定订购一个<a class="ae jd" href="http://www.amazon.com/b/?node=10667898011" rel="noopener ugc nofollow" target="_blank">亚马逊Dash按钮</a>。我知道这个小设备可以帮我解决一个自从我3个月前搬到旧金山以来一直存在的痛点。</p><p id="6ea4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">像许多人一样，我每天使用<a class="ae jd" href="https://uber.com" rel="noopener ugc nofollow" target="_blank"> <strong class="ih je">【优步】</strong> </a>上下班<em class="jf">——看看你优步，我很想看看每月的通勤计划！</em>每天早上，我都经历着同样的套路——解锁手机，打开app，一遍又一遍地选择同一个取车地点，同一个目的地。我知道，第一世界的问题，对吧？</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es jg"><img src="../Images/a01a5d0fb295a6f3465adec7176cf8da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*VTUJ54vTMvApTA3ONP6Qog.jpeg"/></div></figure><blockquote class="jo"><p id="7996" class="jp jq hi hj jr js jt ju jv jw jx jc dx translated">但我喜欢优化，所以如果所有这些都可以通过一个按钮来完成呢？</p></blockquote><p id="66e6" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">目标很简单；按下一个按钮——很方便地位于我的浴室里，我只需要做好准备，然后离开我的公寓。汽车会就在那里等我，根本不用碰我的手机。</p><p id="0fc3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天早上我做了第一次现场测试，棒极了！</p><p id="b850" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是我是如何做到的，你也可以尝试一下——但是，如果你更喜欢直接看代码，请访问<a class="ae jd" href="https://github.com/geoffrey/uber-dash" rel="noopener ugc nofollow" target="_blank"><strong class="ih je">Geoffrey/Uber-dash</strong></a><strong class="ih je">。</strong></p><h2 id="2fd1" class="kd ke hi bd kf kg kh ki kj kk kl km kn iq ko kp kq iu kr ks kt iy ku kv kw kx bi translated">用亚马逊应用程序设置按钮</h2><p id="4fbf" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">首先，你需要设置你的dash按钮，以便使用亚马逊应用程序与你的网络进行通信。遵循您可以在<strong class="ih je">亚马逊应用</strong> — <strong class="ih je">您的账户</strong>—<strong class="ih je">Dash devices</strong>—<em class="jf">下找到的步骤，在最后一步让您从亚马逊选择订单之前，小心退出设置过程。</em> <em class="jf">:说话_无_恶:</em></p><h2 id="ef06" class="kd ke hi bd kf kg kh ki kj kk kl km kn iq ko kp kq iu kr ks kt iy ku kv kw kx bi translated"><strong class="ak">获取按钮的身份</strong></h2><p id="96f1" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">使用并运行本文中<a class="ae jd" rel="noopener" href="/@edwardbenson/how-i-hacked-amazon-s-5-wifi-button-to-track-baby-data-794214b0bdd8">提供的第一个python片段，可以找到你的按钮<strong class="ih je"> ( </strong>例如<strong class="ih je"/><em class="jf">A0:02:DC:B1:3d:B2</em><strong class="ih je">)</strong>的<strong class="ih je"> MAC地址</strong>。</a></p><h2 id="b3e5" class="kd ke hi bd kf kg kh ki kj kk kl km kn iq ko kp kq iu kr ks kt iy ku kv kw kx bi translated">拦截你的按钮的通信</h2><p id="e597" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">得到按钮的MAC地址后，我决定使用<a class="ae jd" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih je"> Nodejs </strong> </a>和<a class="ae jd" href="https://github.com/mranney/node_pcap" rel="noopener ugc nofollow" target="_blank"> <strong class="ih je"> pcap </strong> </a>模块多玩一点网络。我不是网络专家，所以我花了一些额外的时间来玩数据包。我检查了它们的结构，以便发现和提取我感兴趣的部分。</p><p id="5b91" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不幸的是，我只能找到整数数组形式的MAC地址(例如，[160，2，220，177，61，178])。我真的没有进一步搜索，并将数组转换成通常的6组由冒号分隔的两个十六进制数字— <em class="jf">如果您知道用这个pcap模块从数据包中提取十六进制MAC地址的更好方法，请告诉我！然后我将这些与目标的MAC地址进行了比较:dash-button。每当它们匹配时，我就调用处理函数。</em></p><p id="2460" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我还必须抑制数据包检测，因为我在一次按压中检测到了几个数据包。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="ld le l"/></div></figure><h2 id="f95f" class="kd ke hi bd kf kg kh ki kj kk kl km kn iq ko kp kq iu kr ks kt iy ku kv kw kx bi translated">当按钮被唤醒时呼叫优步</h2><p id="48e2" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">一旦您能够检测到按钮在您的网络上唤醒，您就差不多完成了。现在你几乎可以做任何你想做的事情，包括使用他们的API订购一辆优步汽车。</p><p id="87d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我创建了一个非常简单的<a class="ae jd" href="http://expressjs.com/" rel="noopener ugc nofollow" target="_blank"> Express </a>应用程序，它允许你与优步进行OAuth，以便给予应用程序为你请求乘车的权限。</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="7f82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">瞧，现在我们只需要监听按钮，并在按钮被按下时调用<strong class="ih je"> uber.call </strong>。</p><h2 id="f5e9" class="kd ke hi bd kf kg kh ki kj kk kl km kn iq ko kp kq iu kr ks kt iy ku kv kw kx bi translated">获得您的第一次dash-uber骑行！</h2><p id="3af7" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">首先，克隆<a class="ae jd" href="https://github.com/geoffrey/uber-dash" rel="noopener ugc nofollow" target="_blank">这个回购</a>并编辑<strong class="ih je">。/source/config.js </strong>文件添加你的dash按钮<strong class="ih je"> MAC地址</strong>，你的<strong class="ih je">优步申请凭证</strong>以及你要订购的<strong class="ih je">取货</strong>和<strong class="ih je">落货坐标</strong>和<strong class="ih je">产品id </strong> <em class="jf"> (UberX，UberBlack…) </em>。</p><p id="734c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用<strong class="ih je"> npm install安装依赖项。</strong></p><p id="eb80" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行<strong class="ih je">。/dash-button.js </strong>它将监听破折号按钮并调用优步:</p><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="4c72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了获得按钮被按下时您想要使用的产品id，您可以在登录后访问<a class="ae jd" href="http://localhost:3000/products" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/products</a>。它会回复您提货地点的可用产品列表。将您选择的产品id复制/粘贴到您的配置文件中，然后重新启动该程序。</p><h2 id="970e" class="kd ke hi bd kf kg kh ki kj kk kl km kn iq ko kp kq iu kr ks kt iy ku kv kw kx bi translated">捐助</h2><p id="c740" class="pw-post-body-paragraph if ig hi ih b ii ky ik il im kz io ip iq la is it iu lb iw ix iy lc ja jb jc hb bi translated">请随意<a class="ae jd" href="https://github.com/geoffrey/uber-dash" rel="noopener ugc nofollow" target="_blank">分叉此项目</a>并提交拉动请求。我知道这是一个快速和肮脏的黑客，所以有大量的改进空间。当我在<a class="ae jd" href="https://checkr.com" rel="noopener ugc nofollow" target="_blank">checker</a>工作不太忙的时候，我很乐意看你的简历。(我们正在<a class="ae jd" href="http://grnh.se/xual31" rel="noopener ugc nofollow" target="_blank">招聘</a>！)</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lf"><img src="../Images/71d955550911c61d0aef4c66a71f8e15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VLaJ04qsuIGx2MkIAZKDdQ.jpeg"/></div></div></figure><p id="9b51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jf">发表于</em> <strong class="ih je">创业、旅游癖和生活黑客</strong></p><div class="jh ji jj jk fd ab cb"><figure class="lk jl ll lm ln lo lp paragraph-image"><a href="http://supply.us9.list-manage.com/subscribe?u=310af6eb2240d299c7032ef6c&amp;id=d28d8861ad"><img src="../Images/f20f8a326d92cd024c2946c0427a85fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*n0RJ_1N2IHnMf__UQmUrWA.png"/></a></figure><figure class="lk jl ll lm ln lo lp paragraph-image"><a href="https://blog.growth.supply/"><img src="../Images/1b4fd39dd738a88ac13336ad93f1049c.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*qCnxaGPGC2_AOJ4c42Me6Q.png"/></a></figure><figure class="lk jl ll lm ln lo lp paragraph-image"><a href="https://twitter.com/swlh_"><img src="../Images/93f21657a8ed7c0f741216a91b53c713.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*WwLu636h144p49tOpbrj5g.png"/></a></figure></div><p id="ac61" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">-</p></div></div>    
</body>
</html>