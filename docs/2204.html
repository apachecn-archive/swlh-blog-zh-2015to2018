<html>
<head>
<title>Why And How to Dockerize your Ruby on Rails App?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么以及如何对你的Ruby on Rails应用进行Dockerize？</h1>
<blockquote>原文：<a href="https://medium.com/swlh/why-and-how-to-dockerize-your-ruby-on-rails-app-91c1270591d9?source=collection_archive---------16-----------------------#2018-01-19">https://medium.com/swlh/why-and-how-to-dockerize-your-ruby-on-rails-app-91c1270591d9?source=collection_archive---------16-----------------------#2018-01-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/3795aac3ce4af9622719bf3e181f910e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9TP-qhuPyHcOpC4r8kRRjg.jpeg"/></div></div></figure><p id="032b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi jo translated">似乎其他所有的创业公司都在他们的宣传中增加了一个码头工人的角度。许多开发人员选择Rails是因为它允许他们非常快速地工作，但是这可能伴随着依赖性的权衡、版本管理和数据库的挫折以及文件大小的膨胀。Docker通过限制依赖关系的范围，将进程相互隔离，并允许我们使用优化的映像，帮助缓解了这些问题。当然，代码的另一个抽象层很可能会带来问题。</p><p id="a9b8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一开始，指出Dockerfiles、images和containers之间的区别可能有点令人困惑。简而言之，Rails应用程序是在短暂的、可替换的容器中启动的，而容器是基于图像的。大多数情况下，图像是使用other文件从其他图像构建的。</p><h1 id="edb2" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">为什么是Docker？</h1><p id="f049" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">从开发人员的角度来看，有了Docker，您再也不用担心“它能在您的本地环境中工作，但不能在生产环境中工作”的问题，以及“它能在我的Ubuntu机器上工作，但不能在五英尺外我同事的Mac上工作。”由于有了定义文件，在环境之间移植应用程序变得非常容易，从本地到实验室，再到生产。Docker的速度非常快，由于使用了一些Linux内核特性，比如名称空间，您可以隔离网络、文件系统和进程。这种一致性对于用户来说是一个巨大的胜利，对于开发者来说是一个不可思议的机会。有了Docker，您可以将极具破坏性的环境问题降低到几乎为零。</p><p id="9894" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以你看，Docker是一个工具，它允许你将服务或应用程序连同其依赖项打包成一个标准化的单元。这个单元被标记为Docker映像，它包含了应用程序运行所需的一切。Docker映像包含代码、系统库、运行时，以及在没有Docker的情况下运行它所需的一切。</p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/f256c88407730cfb6d57995fb51ed17c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2AIbXbtmOhSGTUu4_p8smg.png"/></div></div></figure><h1 id="6f15" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">使用Docker的优势</h1><p id="a627" class="pw-post-body-paragraph iq ir hi is b it kv iv iw ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn hb bi translated">如果你发现自己一直在寻找提高生产力和改善整个软件开发体验的方法，你会感激Docker提供的以下好处。</p><ul class=""><li id="454e" class="lf lg hi is b it iu ix iy jb lh jf li jj lj jn lk ll lm ln bi translated">Docker允许您以某种方式封装您的应用程序，这种方式使您可以很容易地在不同环境之间移动它。它在所有环境和所有能够运行Docker的机器上都能很好地工作。</li><li id="6f04" class="lf lg hi is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln bi translated">如果您运行的是Ruby的补丁版本、MySQL的旧版本或其他使开发环境难以建立的依赖项，Docker可以简化整个团队的开发。</li><li id="f57e" class="lf lg hi is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln bi translated">使用Docker，您团队中的所有开发人员都可以让您的多服务应用程序以自动化、可重复且高效的方式在他们的工作站上运行。他们所要做的就是运行几个命令，几分钟后一切都正常了。</li><li id="4343" class="lf lg hi is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln bi translated">您的应用程序可以在几毫秒内启动，因为它们位于预先构建的Docker映像中，这使得扩展和缩小变得容易。像安装依赖项这样占用你大量时间的任务只需要在构建时运行一次。映像构建完成后，您可以将它转移到许多主机上。这不仅有助于快速扩展和缩减，而且还使您的部署更具可预测性和弹性。</li><li id="e472" class="lf lg hi is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln bi translated">如果你只使用一种语言，你可能会使自己处于不利地位。通过尝试新的语言和框架来拓宽你的视野成为可能，因为Docker容器允许你隔离一个应用程序。你不必担心其他开发者不得不设置你选择的技术。你所要做的就是给他们一个Docker图像，让他们运行它。</li><li id="64e8" class="lf lg hi is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln bi translated">Docker附带的工具集允许运营经理和开发人员在部署应用程序时一起工作。Docker的行为就像一个抽象。它允许您分发应用程序，而另一个团队的成员不需要知道如何设置或配置他们的环境。私下或公开分发Docker图像也变得很容易。您可以随时关注变更、新版本等。</li></ul><h1 id="fcee" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">入门指南</h1><ul class=""><li id="154b" class="lf lg hi is b it kv ix kw jb lu jf lv jj lw jn lk ll lm ln bi translated">首先选择一个Rails基础映像。一个好的基础形象是最好的开始。它必须为您提供在开发中构建应用程序并在生产中运行它所需的所有依赖项。对于Rails开发，您希望Ruby语言本身伴随着创建nokogiri、pg或mysql2等gem所必需的系统库。</li><li id="1546" class="lf lg hi is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln bi translated">接下来准备您的基础设施或服务器环境。让你的码头运转起来。只要按照Docker文档来做就行了，非常简单。选择您的平台，按照说明操作，就可以了。</li><li id="eb36" class="lf lg hi is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln bi translated">接下来，我们处理Rails图像。Docker利用一个定义文件来描述环境将包含什么。Docker使用一个图像，这是一个只读的模板，来运行你的代码通过一个容器。这幅图像充满了所有的魔力。它包含操作系统二进制文件、库、依赖项和运行代码或应用程序所需的所有应用程序。</li><li id="44b4" class="lf lg hi is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln bi translated">现在，我们写一个Dockerfile文件。Docker只需要使用少数几个命令。它们是:</li><li id="f848" class="lf lg hi is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln bi translated"><strong class="is lx">来自</strong>:这描述了我们的容器将要基于的图像。</li><li id="ba55" class="lf lg hi is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln bi translated"><strong class="is lx">运行</strong>:一如既往地运行命令。</li><li id="8a78" class="lf lg hi is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln bi translated">WORKDIR :这恰好定义了执行所有命令的基本目录。</li><li id="438c" class="lf lg hi is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln bi translated"><strong class="is lx">添加</strong>:将文件从主机复制到容器中。每个命令都会生成一个新的缓存映像，以后可以在此基础上进行构建。变动较大的文件或可能发生变化的包必须放在Dockerfile的下方，以充分利用缓存。</li><li id="7e4e" class="lf lg hi is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln bi translated">尽管您已经成功地构建了一个Docker映像来存放您的Rails应用程序，但是还存在其他依赖关系。您可能需要配置类似Postgres的数据库，并确保数据库容器和应用程序容器可以相互通信。这是Docker Compose真正闪光的地方。</li><li id="82c2" class="lf lg hi is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln bi translated">运行您的规范并总结。这只是介绍如何处理Docker中运行的一个应用程序。您的应用程序可能有不同的依赖集，所以请快速熟悉Dockerfiles。</li></ul></div><div class="ab cl ly lz gp ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="hb hc hd he hf"><p id="442c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mf">原载于</em> <a class="ae lt" href="https://www.cognitiveclouds.com/insights/" rel="noopener ugc nofollow" target="_blank"> <em class="mf">产品洞察博客</em> </a> <em class="mf">来自cognitive clouds:Top</em><a class="ae lt" href="https://www.cognitiveclouds.com/custom-software-development-services/ruby-on-rails-development-company" rel="noopener ugc nofollow" target="_blank"><em class="mf">Ruby on Rails开发公司</em> </a></p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/731acf26f5d44fdc58d99a6388fe935d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6gfnVvkMRFtjVsWF7vkClA.png"/></div></div></figure><h2 id="fd41" class="mh jy hi bd jz mi mj mk kd ml mm mn kh jb mo mp kl jf mq mr kp jj ms mt kt mu bi translated">这个故事发表在<a class="ae lt" href="https://medium.com/swlh" rel="noopener"> The Startup </a>上，这是Medium最大的创业刊物，拥有292，582+人关注。</h2><h2 id="7945" class="mh jy hi bd jz mi mj mk kd ml mm mn kh jb mo mp kl jf mq mr kp jj ms mt kt mu bi translated">在这里订阅接收<a class="ae lt" href="http://growthsupply.com/the-startup-newsletter/" rel="noopener ugc nofollow" target="_blank">我们的头条新闻</a>。</h2><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mg"><img src="../Images/731acf26f5d44fdc58d99a6388fe935d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6gfnVvkMRFtjVsWF7vkClA.png"/></div></div></figure></div></div>    
</body>
</html>