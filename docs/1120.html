<html>
<head>
<title>Build a Raspberry Pi Smart Door Lock Security System for your Smart Home! — Switched On Network</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为您的智能家居打造树莓派智能门锁安防系统！—打开网络</h1>
<blockquote>原文：<a href="https://medium.com/swlh/build-a-raspberry-pi-smart-door-lock-security-system-for-your-smart-home-switched-on-network-515ad8755241#2017-11-10">https://medium.com/swlh/build-a-raspberry-pi-smart-door-lock-security-system-for-your-smart-home-switched-on-network-515ad8755241#2017-11-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex if ig ih ii"><div class="bz dy l di"><div class="ij ik l"/></div></figure><p id="5882" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">这个项目<a class="ae jj" href="https://www.electromaker.io/contest/connectivity" rel="noopener ugc nofollow" target="_blank">获得了电动汽车连接竞赛</a>的二等奖！</p><p id="4ed1" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">你可能已经熟悉了<strong class="in jk"> <em class="jl">双</em> </strong>因素认证，用于登录你的网上银行或你的脸书或电子邮件账户等安全系统。这种门禁系统更进一步，使用三因素认证。要打开门，你需要:</p><ol class=""><li id="ca13" class="jm jn hi in b io ip is it iw jo ja jp je jq ji jr js jt ju bi translated">一个RFID密钥卡</li><li id="a4cf" class="jm jn hi in b io jv is jw iw jx ja jy je jz ji jr js jt ju bi translated">一个6位数的密码</li><li id="601c" class="jm jn hi in b io jv is jw iw jx ja jy je jz ji jr js jt ju bi translated">随机生成的一次性接入码，并以文本形式发送到您的手机。</li></ol><p id="5369" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">(<strong class="in jk">注意:</strong>这是“三因素”认证，只是广义上的，因为其中两项是“您拥有的东西”。然而，由于该系统是完全开源的，这三个步骤可以根据您的意愿进行修改，例如，可以包括指纹或视网膜扫描仪。)</p><h1 id="0542" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">要为自己构建这个项目，您需要…</h1><ul class=""><li id="8555" class="jm jn hi in b io ky is kz iw la ja lb je lc ji ld js jt ju bi translated">覆盆子馅饼。我用的是一个内置WiFi的<a class="ae jj" href="http://amzn.to/2sdq9lK" rel="noopener ugc nofollow" target="_blank">树莓Pi 3 </a>和一个有助于保护和安装在墙上的盒子</li><li id="5d5b" class="jm jn hi in b io jv is jw iw jx ja jy je jz ji ld js jt ju bi translated">一个<a class="ae jj" href="http://amzn.to/2sikupH" rel="noopener ugc nofollow" target="_blank"> USB RFID阅读器</a>。这一个简单地通过USB插入，就像一个键盘输入来自RFID智能钥匙和卡片的代码</li><li id="9151" class="jm jn hi in b io jv is jw iw jx ja jy je jz ji ld js jt ju bi translated">树莓派的<a class="ae jj" href="http://amzn.to/2uIWWfl" rel="noopener ugc nofollow" target="_blank">触摸屏LCD</a>。</li><li id="77a0" class="jm jn hi in b io jv is jw iw jx ja jy je jz ji ld js jt ju bi translated">一个<a class="ae jj" href="http://amzn.to/2tn1uYG" rel="noopener ugc nofollow" target="_blank"> GPIO扩展板</a></li><li id="4e3b" class="jm jn hi in b io jv is jw iw jx ja jy je jz ji ld js jt ju bi translated">连接扩展板的带状电缆</li><li id="d2c0" class="jm jn hi in b io jv is jw iw jx ja jy je jz ji ld js jt ju bi translated">用于连接触摸屏的阴对阳带状电缆</li><li id="60b9" class="jm jn hi in b io jv is jw iw jx ja jy je jz ji ld js jt ju bi translated">一个5V单通道<a class="ae jj" href="http://amzn.to/2udy92H" rel="noopener ugc nofollow" target="_blank">继电器开关</a></li><li id="9ec4" class="jm jn hi in b io jv is jw iw jx ja jy je jz ji ld js jt ju bi translated">一个<a class="ae jj" href="http://amzn.to/2udLpEG" rel="noopener ugc nofollow" target="_blank">电子门锁</a></li><li id="e8a2" class="jm jn hi in b io jv is jw iw jx ja jy je jz ji ld js jt ju bi translated">一个<a class="ae jj" href="http://amzn.to/2tMe0ly" rel="noopener ugc nofollow" target="_blank">电脑电源</a>和电源线(给树莓派和电子门锁供电)</li><li id="df0e" class="jm jn hi in b io jv is jw iw jx ja jy je jz ji ld js jt ju bi translated">一些<a class="ae jj" href="http://amzn.to/2tM6Rll" rel="noopener ugc nofollow" target="_blank">杜邦电缆</a>用于连接继电器开关</li></ul><p id="ce07" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">您还需要一些工具，所以在开始之前，请确保您已经准备好了以下所有工具:</p><ul class=""><li id="5922" class="jm jn hi in b io ip is it iw jo ja jp je jq ji ld js jt ju bi translated">一个<a class="ae jj" href="http://amzn.to/2AtjMeD" rel="noopener ugc nofollow" target="_blank">万用表</a>，用于检查电压</li><li id="44c9" class="jm jn hi in b io jv is jw iw jx ja jy je jz ji ld js jt ju bi translated">各种尺寸的<a class="ae jj" href="http://amzn.to/2zGLlUF" rel="noopener ugc nofollow" target="_blank">螺丝刀</a></li><li id="89ee" class="jm jn hi in b io jv is jw iw jx ja jy je jz ji ld js jt ju bi translated">一些<a class="ae jj" href="http://amzn.to/2hfLaVn" rel="noopener ugc nofollow" target="_blank">剥线钳和钢丝钳</a></li><li id="0676" class="jm jn hi in b io jv is jw iw jx ja jy je jz ji ld js jt ju bi translated">一个<a class="ae jj" href="http://amzn.to/2AslE7H" rel="noopener ugc nofollow" target="_blank">烙铁</a></li><li id="3939" class="jm jn hi in b io jv is jw iw jx ja jy je jz ji ld js jt ju bi translated">一些<a class="ae jj" href="http://amzn.to/2jaN91e" rel="noopener ugc nofollow" target="_blank"> choc块</a>，用于将电线连接在一起</li><li id="e741" class="jm jn hi in b io jv is jw iw jx ja jy je jz ji ld js jt ju bi translated">一支<a class="ae jj" href="http://amzn.to/2tgUekp" rel="noopener ugc nofollow" target="_blank">胶枪</a></li><li id="2fbc" class="jm jn hi in b io jv is jw iw jx ja jy je jz ji ld js jt ju bi translated">一把<a class="ae jj" href="http://amzn.to/2AlnVR7" rel="noopener ugc nofollow" target="_blank">无绳电钻/螺丝刀</a></li><li id="3e9e" class="jm jn hi in b io jv is jw iw jx ja jy je jz ji ld js jt ju bi translated">一个<a class="ae jj" href="http://amzn.to/2AtqCRq" rel="noopener ugc nofollow" target="_blank">拼图</a></li></ul><h1 id="6c41" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤1:为Raspberry PI安装和配置LCD触摸屏</h1><p id="79f4" class="pw-post-body-paragraph il im hi in b io ky iq ir is kz iu iv iw le iy iz ja lf jc jd je lg jg jh ji hb bi translated">我们需要做的第一件事是让我们的液晶触摸屏工作。根据您购买的版本型号，它可能会附带要安装的驱动程序，也可能会附带自己的操作系统映像，供您写入Raspberry Pi的SD卡。我的就是这种情况，所以我需要使用Win32 Disk Imager将图像写入我的SD卡。确保您选择了正确的写入设备，这样您就不会意外擦除任何外部硬盘驱动器！</p><p id="a194" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">完成后，将microSD卡插回Raspberry Pi，并像这样将LCD安装到GPIO端口，从SD卡插槽旁边的顶端开始，远离USB和以太网端口。接下来，拿着microUSB电源线并将其插入以启动Rapsberry Pi，以确认屏幕及其触摸屏元件工作正常。</p><p id="b71b" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">正如你所料，显示器的方向是横向的，但对于我们的虚拟键盘，我们希望显示器是纵向的，所以我们需要更改一些配置文件来实现这一点。通过WiFi或以太网电缆将您的Raspberry Pi连接到网络后，打开启动目录中的config.txt文件:</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="8b3c" class="lq kb hi lm b fi lr ls l lt lu">$ sudo nano /boot/config.txt</span></pre><p id="eb2d" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">该文件决定了显示器的方向。我们正在寻找包含“dtoverlay=waveshare35a”的底部行，我们将在它后面添加一个分号，后跟“rotate=180”。保存并退出。</p><p id="62e3" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">接下来，我们需要旋转触摸屏以匹配显示屏，因此我们需要打开“99校准”配置文件:</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="08d6" class="lq kb hi lm b fi lr ls l lt lu">$ sudo nano /etc/X11/xorg.conf.d/99-calibration.conf</span></pre><p id="aca5" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">在这个配置文件中，我们首先需要将SwapAxis选项从1更改为零，然后输入以下校准选项的基本值。完成后，保存并退出。然后，您可以重新启动您的Pi，一旦它启动备份，您的显示器应该旋转到纵向。</p><h1 id="b6b8" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤2:在Raspberry Pi上安装MySQL数据库和Apache Web服务器</h1><p id="0270" class="pw-post-body-paragraph il im hi in b io ky iq ir is kz iu iv iw le iy iz ja lf jc jd je lg jg jh ji hb bi translated">当我们在shell中时，现在是安装数据库的最佳时机，它将保存我们的门禁系统的访问控制列表，并记录所有成功和不成功的访问尝试的日志。我们将安装一个完整的LAMP堆栈，这样我们就可以使用phpMyAdmin访问数据库，这也意味着您可以使用PHP创建自己的web界面，以便在将来轻松地向系统添加和删除用户。</p><p id="05ea" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">首先，我们将使用以下命令安装Apache web服务器:</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="3f43" class="lq kb hi lm b fi lr ls l lt lu">$ sudo apt-get update $ sudo apt-get install apache2</span></pre><p id="734f" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">一旦设置好了，我们将安装PHP，然后是MySQL。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="9b65" class="lq kb hi lm b fi lr ls l lt lu">$ sudo apt-get install php libapache2-mod-php php-mcrypt php-mysql $ sudo apt-get install mysql-server</span></pre><p id="57a7" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">作为MySQL服务器安装过程的一部分，它会要求您为“<strong class="in jk"> root </strong>”用户输入一个安全的密码，所以请输入一个并确保您不会忘记。</p><p id="0c0e" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">最后，一旦MySQL安装完毕，我们将重启Apache，然后安装phpMyAdmin。</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="272a" class="lq kb hi lm b fi lr ls l lt lu">$ sudo service apache2 restart $ sudo apt-get install phpmyadmin php-mbstring php-gettext</span></pre><p id="207c" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">作为安装过程的一部分，它会询问我们想要配置哪个web服务器来使用它，所以确保选择了Apache并选择OK。我们将允许phpMyAdmin自动安装和配置自己的数据库，然后输入我们在安装MySQL时选择的root密码，以允许phpMyAdmin创建自己的数据库和用户。接下来，我们将为该用户创建一个安全密码。</p><p id="3d23" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">安装完成后，你可以在你的网络浏览器中输入你的Pi的IP地址，然后输入“<strong class="in jk"> /phpmyadmin </strong>，然后用你在安装MySQL时创建的<strong class="in jk"> root </strong>账户登录。</p><h1 id="d539" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤3:安装Python脚本并设置数据库表</h1><p id="9f2f" class="pw-post-body-paragraph il im hi in b io ky iq ir is kz iu iv iw le iy iz ja lf jc jd je lg jg jh ji hb bi translated">现在是时候安装Python脚本了，它就像胶水一样把所有东西粘在一起。它接收来自智能钥匙和触摸屏的用户输入，它与数据库对话以查看谁被允许访问，并使用<a class="ae jj" href="https://www.twilio.com/" rel="noopener ugc nofollow" target="_blank"> Twilio </a>向用户发送短信。</p><p id="7398" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">Python脚本和空白数据库表可以从GitHub下载，网址:<a class="ae jj" href="https://github.com/paulfp/Three-Factor-Security-Door" rel="noopener ugc nofollow" target="_blank">https://github.com/paulfp/Three-Factor-Security-Door</a></p><p id="245c" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">一旦您通过phpMyAdmin导入了数据库文件，您将看到数据库包含3个表。第一个名为<strong class="in jk"> <em class="jl"> access_list </em> </strong>，这个表包含了每个可以进入被我们锁定的门保护的区域的人的详细信息。在这里，您可以看到我添加了几个用户，包括他们的姓名、他们的遥控器的RFID代码、他们的PIN和他们的手机号码，以便向其发送SMS双因素授权代码。我们还包括一个图像文件，以便欢迎屏幕可以显示头像。确保这是一个GIF文件，并将其存储在与Python脚本相同的目录中。</p><p id="56a8" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">其次，我们有一个<strong class="in jk"> <em class="jl"> access_log </em> </strong>表，它记录了所有访问系统的尝试——成功的和不成功的。这记录了提供给扫描仪的任何RFID代码，它们当时是否被授权，输入了什么PIN，一次性代码被发送到哪个移动号码，以及它是否被正确输入等等。这些日志记录信息在现实世界中非常有用，既可用于诊断合法用户访问的问题，也可用于收集任何人试图获得未授权访问的证据。</p><p id="73f2" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">最后一个表包含我们的Twilio帐户详细信息，我们用它来发送文本消息，在门暂时解锁允许授权方访问之前，启动验证过程的最后一部分。</p><p id="7958" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">将Python脚本下载到Raspberry Pi用户的/ <strong class="in jk"> home </strong>目录，确保安装了脚本所需的所有依赖项。</p><h1 id="94c4" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤4:让Python脚本在您的Raspberry Pi启动时自动加载</h1><p id="7c14" class="pw-post-body-paragraph il im hi in b io ky iq ir is kz iu iv iw le iy iz ja lf jc jd je lg jg jh ji hb bi translated">每当Raspberry Pi启动时，我们都需要让脚本自动加载。为此，我们需要在<strong class="in jk">自动启动</strong>配置文件中添加一行。在您的终端中键入以下内容:</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="0980" class="lq kb hi lm b fi lr ls l lt lu">sudo nano ~/.config/lxsession/LXDE-pi/autostart</span></pre><p id="f7a9" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">然后添加这样一行:</p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="5feb" class="lq kb hi lm b fi lr ls l lt lu">@sudo python lock.py</span></pre><p id="0865" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">保存并退出。</p><h1 id="23fd" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤5:连接GPIO扩展板和继电器开关</h1><p id="25e5" class="pw-post-body-paragraph il im hi in b io ky iq ir is kz iu iv iw le iy iz ja lf jc jd je lg jg jh ji hb bi translated">随着我们的Pi上的一切都已设置好，现在是时候断开屏幕并将Pi放入其保护壳中了。为了保持对GPIO端口的访问，我们使用了一根短的26针阴对阳带状电缆，我们还需要添加一个GPIO扩展板。这是因为触摸屏LCD用完了一些我们需要在继电器中使用的引脚，即5V引脚。如果您愿意，您也可以从电源装置的另一个5V插头为继电器供电。为了将屏幕连接到电路板上，我们需要另一根长带状电缆，并且您需要小心地将几个未使用的引脚弯曲到一边，以使其适合。然后，连接触摸屏并再次给Pi加电，以确保一切正常。</p><p id="6e08" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">下一步是将我们的继电器连接到GPIO端口。这是一个5V继电器，因此正极引脚需要用杜邦电缆连接到我们GPIO扩展板上的5V引脚，负极引脚当然可以接地。信号引脚需要连接到任何编号的GPIO引脚，并确保您选择的是一个没有被触摸屏用于任何事情的危险的引脚；如你所见，我在这里选择了13号引脚，这是一个很好的选择。</p><h1 id="a57c" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤6:连接RFID阅读器并测试</h1><p id="8a75" class="pw-post-body-paragraph il im hi in b io ky iq ir is kz iu iv iw le iy iz ja lf jc jd je lg jg jh ji hb bi translated">现在是时候连接一切了，包括RFID阅读器，看看它是否工作！拿起你的RFID标签，拿在阅读器前。它认出了我，并显示了我的名字和照片。然后我输入我的密码，1 2 3 4 5 6，然后它会生成一个随机的一次性密码，以短信的形式发送到我的手机上。</p><p id="87ff" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">我一输入这个代码，你就会听到“<em class="jl">的咔嚓声！继电器开关的</em>亮起，几秒钟后再次“咔嗒”一声关闭。稍后，当我们把它安装到门口时，继电器开关将连接到电子门锁上，从而打开门锁。</p><h1 id="59fd" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">第七步:准备双电压(5V / 12V)电源，同时给树莓派和电子门锁供电</h1><p id="b4d8" class="pw-post-body-paragraph il im hi in b io ky iq ir is kz iu iv iw le iy iz ja lf jc jd je lg jg jh ji hb bi translated">接下来，我们需要准备好电源，为树莓Pi(需要5V)和门锁(需要12V，使用继电器开关触发)供电。我们希望整个系统只使用一根电源线供电，所以我们需要一个可以同时提供5V和12V的电源，所以我们使用的是台式计算机电源。</p><p id="d713" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">在这一点上，指出我们将要处理带电电压似乎是谨慎的。请注意，是低压，而不是电源电流——但显然，电源本身确实插入了电源。因此，只有当你对自己正在做的事情有信心和把握的时候，你才需要自担风险。如果你有任何疑问，不要继续，而是咨询有经验的，合格的和有能力的专业人士。我不能为你的行为承担任何责任！明白了吗？对，我们是……</p><h1 id="7f52" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤7b:如何在没有连接到计算机主板时打开ATX电源</h1><p id="687c" class="pw-post-body-paragraph il im hi in b io ky iq ir is kz iu iv iw le iy iz ja lf jc jd je lg jg jh ji hb bi translated">正如您所知，当您插入电脑时，电脑不会立即打开，即使电源上的小开关本身处于“打开”位置，您也必须先按下电脑机箱前面的“打开”按钮。嗯，在这种情况下，我们希望我们的电源只使用它自己的开关来打开，所以我们需要做一些电子方面的工作。从PSU盒子里出来的无数电缆中，你只会找到一根绿色的；这是信号电缆，需要永久短接至黑色接地电缆。拿起绿色电缆和任何黑色电缆，然后用剪刀剪断它们，然后从每一端剥去一小段，露出里面的裸线。把它们拧在一起，这样它们就不会磨损，然后拿一块巧克力从末端切下一块。将绿色和黑色电缆连接在一起，然后插上电源并打开PSU来测试它是否工作。耶，成功了！</p><p id="3c73" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">现在，我们需要拿一根通常为硬盘提供5V和12V电压的SATA电源线，用万用表测试触点，检查哪根是哪根。将万用表的黑色触点放在黑色接地线上，然后测试黄色和红色触点，检查哪一个是哪一个。如你所见，黄色代表12V，红色代表5V。</p><p id="13f5" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">切断SATA连接器，露出两对电缆；一个5V接地，一个12V接地。剥去每根电线的两端，扭曲它们以防止磨损，然后切断一个4向chocblocks部分。像这样把4根电缆连接到垫块上，给我们一个方便的5V和12V电源。</p><h1 id="2711" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤8:将Raspberry Pi连接到5V双电压电源</h1><p id="6029" class="pw-post-body-paragraph il im hi in b io ky iq ir is kz iu iv iw le iy iz ja lf jc jd je lg jg jh ji hb bi translated">接下来，带上你的树莓派附带的电源。虽然它的末端是一个microUSB插头，但由于它只提供电源，没有数据传输，所以电缆只有两个芯；正反。剪断电源上的电缆，然后将两个芯线分开几厘米。剥去并扭转两端，然后寻找电缆上的标记，以确定哪一个是负极。如果没有任何明显的标记，你将不得不用你的万用表做一些检测工作。将USB电源线连接到我们刚刚准备的chocblock，确保连接到5V电源，在我的情况下是红色的。</p><p id="3045" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">我们可以通过将电源线连接到我们的Raspberry Pi，然后打开我们的电源单元来检查这一点。正如你在这里看到的，它工作得非常好！</p><h1 id="1c24" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤9:测试和连接电子门锁</h1><p id="3610" class="pw-post-body-paragraph il im hi in b io ky iq ir is kz iu iv iw le iy iz ja lf jc jd je lg jg jh ji hb bi translated">现在是时候将我们的注意力转向电动门锁扣了——这是位于门框中的锁扣，通常是关闭的，所以除非向锁扣提供12V电压，否则不会允许门打开，在这种情况下，它允许自己打开，有效地解锁门。</p><p id="1c2c" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">如果我们打开罢工，你可以看到两根非常细的电线，这是要焊接到这个黑色塑料顶部的接触。在这一个上，电线是如此的薄和脆弱，以至于它们在运输中被折断了，所以为了补救这一点，我们将移除固定触点的黑色塑料夹子，并焊接一些更长的电线。我们已经得到了一些方便的，因为我们刚刚切断了电源，所以让我们从那里拿一些长度的电线，剪断它们，然后剥去和扭转两端。</p><p id="1c42" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">现在是时候拿出你的烙铁，用一些焊料在电线的裸露端上镀锡了，然后把门撞过来，把我们的新电线焊接到顶部两根非常脆弱的裸露电线上。</p><p id="5390" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">现在是测试门撞击的时候了，让我们将它直接连接到我们之前创建的12V电源，并观察当我们打开电源时会发生什么。</p><h1 id="86ee" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤10:将电子门锁安装到门框中，将电子元件安装到墙壁中</h1><p id="77f9" class="pw-post-body-paragraph il im hi in b io ky iq ir is kz iu iv iw le iy iz ja lf jc jd je lg jg jh ji hb bi translated">现在需要将门锁安装到您的门口，取代您现有的锁扣板。在这里，我正在将该系统安装到这个门框模型中，我已经将它组装起来作为演示，所以你必须原谅这种有点劣质的木制品！在我的矿上，电子设备将位于立柱墙内，但在继续之前，请确保您遵守您所在地区的所有建筑法规。</p><p id="e5a3" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">第一步是钻一个大小合适的洞，让电缆穿过木头到达下面的电源。将我们的双电压电源电缆沿垂直梁向上延伸，穿过choc块的中心钻一个小导向孔，然后拧紧到位。然后，将USB电源线从孔中拔出，为树莓派供电。接下来，我们需要决定我们的组件在立柱墙内的排列，我正在使用上一个项目的备用木块来创建一个小平台，我可以在上面安装GPIO扩展板。继电器开关就在垂直横梁上，紧挨着电子锁。</p><p id="6adb" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">Raspberry Pi的外壳在其底座上有安装点，因此测量它们之间的距离，然后将测量结果转移到水平梁，标记两个点以插入一些小螺钉，几乎一直向下但不完全向下。有了这些，树莓皮就可以放上去滑回去，牢牢地固定住。电源线整齐地延伸到插座，现在可以插入了。</p><h1 id="c40b" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤11:连接继电器开关、树莓Pi和电子门锁</h1><p id="5a12" class="pw-post-body-paragraph il im hi in b io ky iq ir is kz iu iv iw le iy iz ja lf jc jd je lg jg jh ji hb bi translated">将安装块固定到位，尽量不要像我一样劈开木头，哎呀！如有必要，钻一个导向孔以避免这种情况。然后，拧紧GPIO扩展板，并将继电器开关固定在靠近电子锁扣的位置。接下来，将一根电缆直接从门扣连接到继电器的常开端子。任何一个都可以，因为它不是一个极化的组件。然后将一段电缆连接到接地端子，穿过我们钻的孔，然后将其连接到我们的双电压电源的负极端子。最后，将门卡的另一根电线连接到12V正极电源。</p><h1 id="46f6" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">第12步:在墙上打孔，安装RFID阅读器和LCD触摸屏</h1><p id="a03a" class="pw-post-body-paragraph il im hi in b io ky iq ir is kz iu iv iw le iy iz ja lf jc jd je lg jg jh ji hb bi translated">接下来，我们需要在墙上凿洞来安装RFID阅读器和LCD触摸屏。我先在一个麦片包装上标出了洞，以确保位置正确，然后以此为指导在墙上标出洞。在要切掉的区域中心钻一个洞，然后用竖锯把两个方块都切掉。我用了一些绝缘胶带使我的演示装置的边缘看起来更整洁，你当然可以让你的看起来比我的好得多！</p><p id="88c7" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">为了安装RFID阅读器，我在不包含信息图的那一半正面使用了一些热胶水，然后将它压在墙上。我还用了一些胶带来帮助固定它，因为这个USB型号不是专门用于墙壁安装的。我以同样的方式安装我的液晶显示器，这并不理想，我不建议在现实世界中使用这种方法，但它应该可以很好地演示这个版本。</p><p id="bdda" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">接下来，将miniUSB电缆连接到RFID阅读器，并启动Pi来测试它的工作情况。</p><p id="e116" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">现在是最后的润色了，所以让我们用一些木块来固定电源，然后修剪掉所有电缆的多余长度。小心地将它们一个接一个地拆开，剪成合适的长度，剥去并扭转两端，然后重新连接。然后，用大头钉把它们整齐地固定住。</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="er es lv"><img src="../Images/6dafc621f70951cbd0bcce529f9f5e36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Asxsupx3gCC7sI6aV--0_Q.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx">The Raspberry Pi and components ready to create the Ultimate Smart Door Lock!</figcaption></figure><p id="9b91" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">我们完事了。总结一下我们的构建，我们有一个由继电器开关激活的电子门锁，它反过来由我们的Raspberry Pi的输出控制，它使用RFID阅读器和触摸屏输入拒绝或允许访问。它还通过WiFi连接到互联网，使用web服务通过SMS将一次性密码发送到用户的手机，起到三重身份验证的作用。整个装置由一个电脑电源供电，它位于墙内</p><p id="64c5" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated">这就是我们，一个可笑的安全门禁系统，可以进入你家或办公室最秘密的房间。如果您打算自己构建一个，本文开头有您需要购买的所有低成本组件的链接，以及下载我的Python脚本以加载到您的Raspberry Pi的链接。一定要给我发一张你工作设置的图片或视频——我是Twitter上的@ <a class="ae jj" href="https://twitter.com/paulfp" rel="noopener ugc nofollow" target="_blank"> paulfp </a>。</p></div><div class="ab cl mg mh gp mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="hb hc hd he hf"><p id="a87d" class="pw-post-body-paragraph il im hi in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji hb bi translated"><em class="jl">原载于2017年11月10日</em><a class="ae jj" href="https://www.switchedonnetwork.com/2017/11/10/build-the-ultimate-door-security-system-with-three-factor-authentication/" rel="noopener ugc nofollow" target="_blank"><em class="jl">【https://www.switchedonnetwork.com</em></a><em class="jl">。</em></p></div></div>    
</body>
</html>