<html>
<head>
<title>Theming Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">主题角度</h1>
<blockquote>原文：<a href="https://medium.com/swlh/theming-angular-c869827738c3?source=collection_archive---------0-----------------------#2018-11-04">https://medium.com/swlh/theming-angular-c869827738c3?source=collection_archive---------0-----------------------#2018-11-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/6d544d8c8ed0e9a60cbbd108b1785d33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xi2MhjD7X698iT8Stkx65Q.png"/></div></div></figure><div class=""/><div class=""><h2 id="c733" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh dx translated">突破视图封装给恐龙上色</h2></div><p id="0165" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">角度组件有一个有趣的行为叫做<em class="ke"> ViewEncapsulation — </em>它<em class="ke"> </em>使得为组件定义的样式在范围上仅限于那个特定的组件。根据它的设置，覆盖这些样式可能会很棘手。那么，我们如何着手对角度应用进行主题化呢？</p><h1 id="0374" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw bi translated">问题是</h1><p id="71fa" class="pw-post-body-paragraph ji jj ht jk b jl kx iu jn jo ky ix jq jr kz jt ju jv la jx jy jz lb kb kc kd hb bi translated">假设您有一个<code class="du lc ld le lf b">TrexComponent</code>，并在<code class="du lc ld le lf b">trex.component.scss</code>文件中定义它的样式。多亏了<code class="du lc ld le lf b">ViewEncapsulation.Emulated</code> <em class="ke"> </em>(这是默认设置)这些样式不会影响应用程序的任何其他部分。</p><p id="0154" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">但是反过来也一样:比如说，如果你的根<code class="du lc ld le lf b">AppComponent</code>定义了一些样式，它们就不会被应用到子组件上。</p><figure class="lh li lj lk fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lg"><img src="../Images/abd782d71c33f480472a01a17c5f335b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JzrHE9A-Mta-fCBcIN2-3w.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx">With `ViewEncapsulation.Emulated`, styles defined in the ancestor component <strong class="bd lp">don’t</strong> impact a descendant component.</figcaption></figure><p id="260b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">你可以在全局样式文件(通常是<code class="du lc ld le lf b">src/styles.scss</code>)中设置一个全局样式，但它是为应用程序中的所有组件设置的，更重要的是，你不能动态地这样做，例如，当载入一些用户偏好并想基于此改变一个样式时。</p><figure class="lh li lj lk fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lg"><img src="../Images/5fa0dc19f773f790b54b9616234eef48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*umd49u7QxNZx6Vns2RwJjQ.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx">Globally set styles <strong class="bd lp">do</strong> impact components… but they are hard to change dynamically.</figcaption></figure><p id="28e7" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">这个影响组件风格的问题在设置<code class="du lc ld le lf b">Native</code>(现在不推荐)或<code class="du lc ld le lf b">ShadowDom</code>封装的情况下更加明显。因为is“隐藏”了一个<em class="ke">阴影根</em>后面的组件，所以即使是全局样式也不会影响你的组件。</p><p id="4788" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">即使你在典型的应用程序中不使用<code class="du lc ld le lf b">ViewEncapsulation.ShadowDom</code>，一旦你想创建一个可重用的<a class="ae lq" rel="noopener" href="/@tomsu/building-web-components-with-angular-elements-746cd2a38d5b"> Web组件</a>，这是必须的——所以这确实是一个我们需要学习如何解决的问题。</p><figure class="lh li lj lk fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lg"><img src="../Images/119c36b00e726283787e0989f871043d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KI7cRe6m5V0Bz7heVo135w.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx">With `ViewEncapsulation.ShadowDom`, global styles also <strong class="bd lp">don’t</strong> impact a descendant component.</figcaption></figure><h1 id="bfec" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw bi translated">解决方案</h1><p id="85fe" class="pw-post-body-paragraph ji jj ht jk b jl kx iu jn jo ky ix jq jr kz jt ju jv la jx jy jz lb kb kc kd hb bi translated">为了解决这个问题，我们将使用<a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/CSS/--*" rel="noopener ugc nofollow" target="_blank"> CSS自定义属性</a>，也就是CSS变量。</p><blockquote class="lr ls lt"><p id="f65c" class="ji jj ke jk b jl jm iu jn jo jp ix jq lu js jt ju lv jw jx jy lw ka kb kc kd hb bi translated">以<code class="du lc ld le lf b">--</code>为前缀的属性名，如<code class="du lc ld le lf b">--example-name</code>，代表<em class="ht">自定义属性</em>，它包含一个值，该值可以在使用<code class="du lc ld le lf b"><a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/CSS/var" rel="noopener ugc nofollow" target="_blank">var()</a></code>函数的其他声明中使用。</p></blockquote><p id="6f46" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">这意味着您可以像定义普通css属性一样定义一个自定义属性，例如<code class="du lc ld le lf b">"font-size: 16px"</code>,并且它可以在级联中的任何地方被引用(在与您定义属性时使用的选择器相匹配的元素的整个子树中)。)</p><figure class="lh li lj lk fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lg"><img src="../Images/ef22dc2dd44b91eabff73734b55bff02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*blQ14Kl_QhDrAOHhwFvydA.png"/></div></div></figure><p id="a5cf" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">现在，如果你还没有使用过css自定义属性，需要一段时间才能理解(从经验上讲…)，但是它是一个非常强大的工具。重要的是不要把它们看作是<a class="ae lq" href="http://sass-lang.com" rel="noopener ugc nofollow" target="_blank"> SASS </a>或<a class="ae lq" href="http://lesscss.org/" rel="noopener ugc nofollow" target="_blank"> Less </a>变量的替代——这些变量只在编译期间计算，所以它们是<em class="ke">静态的。</em>相反，像对待任何其他CSS属性一样对待它们(想想:<code class="du lc ld le lf b">font-size</code>)。</p><p id="cad1" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">例如，你可以:</p><ul class=""><li id="6718" class="lx ly ht jk b jl jm jo jp jr lz jv ma jz mb kd mc md me mf bi translated">在不同的组件中设置不同的值("<em class="ke">GreenDinosComponent</em>vs "<em class="ke">PinkDinosComponent "</em>)，</li><li id="456e" class="lx ly ht jk b jl mg jo mh jr mi jv mj jz mk kd mc md me mf bi translated">用伪类(<code class="du lc ld le lf b">:hover {--main-color: darkgreen}</code>)来改变它们</li><li id="1c96" class="lx ly ht jk b jl mg jo mh jr mi jv mj jz mk kd mc md me mf bi translated">…或媒体询问</li><li id="10aa" class="lx ly ht jk b jl mg jo mh jr mi jv mj jz mk kd mc md me mf bi translated">最后，用自定义指令动态设置它们！</li></ul><p id="2cd1" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">像下面这样简单的指令就足够了。</p><figure class="lh li lj lk fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ml"><img src="../Images/376bb7f7cc376d2576b2ad62a4845759.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hbVNqnkBK4faK3xNsPueog.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx">see the source: <a class="ae lq" href="https://gist.github.com/sulco/6860711bd1f7d72344f317118a28ff4f#file-theme-directive-ts" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/sulco/6860711bd1f7d72344f317118a28ff4f</a></figcaption></figure><p id="e9e7" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">需要注意的一点是，<code class="du lc ld le lf b">[ngStyle]="{....}"</code>类型的绑定现在还不能工作——参见这个<a class="ae lq" href="https://github.com/angular/angular/issues/9343" rel="noopener ugc nofollow" target="_blank"> Github问题</a>中的讨论——所以像这样的自定义指令是可能的解决方法之一。</p><h1 id="95e9" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw bi translated">演示应用程序</h1><figure class="lh li lj lk fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mm"><img src="../Images/6e30cf778dd0d98ca143527549b60063.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*w9L2wymEUfkSLM_P7ezKqw.gif"/></div></div></figure><p id="955d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">好了，我已经给你们展示了一些插图，一些代码片段，但是如何把它们放在一起呢？它真的有用吗？:-)好吧，你自己看吧:</p><ul class=""><li id="7ec3" class="lx ly ht jk b jl jm jo jp jr lz jv ma jz mb kd mc md me mf bi translated">你可以在这里玩应用程序<a class="ae lq" href="https://angular-themes.netlify.com/" rel="noopener ugc nofollow" target="_blank"/></li><li id="f255" class="lx ly ht jk b jl mg jo mh jr mi jv mj jz mk kd mc md me mf bi translated">参见<a class="ae lq" href="https://github.com/sulco/dino-themes" rel="noopener ugc nofollow" target="_blank"> Github </a>上的源代码</li></ul><p id="185b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">需要注意的事项:</p><ul class=""><li id="db11" class="lx ly ht jk b jl jm jo jp jr lz jv ma jz mb kd mc md me mf bi translated">除了使用<code class="du lc ld le lf b">ViewEncapsulation.ShadowDom</code>的霸王龙，所有恐龙都使用默认的<code class="du lc ld le lf b">ViewEncapsulation.Emulated</code>——所以你可以看到这两种情况下的主题化工作。</li><li id="fdcc" class="lx ly ht jk b jl mg jo mh jr mi jv mj jz mk kd mc md me mf bi translated">你实际上不需要把自定义属性<code class="du lc ld le lf b">[dtTheme]</code>直接放在一个组件上，它可以应用在你的应用程序中的任何HTML元素上。该主题将应用于内部的所有内容:</li></ul><pre class="lh li lj lk fd mn lf mo mp aw mq bi"><span id="f755" class="mr kg ht lf b fi ms mt l mu mv">&lt;div <strong class="lf mw">[dtTheme]</strong>="getCustomTheme()"&gt;<br/>   <strong class="lf mw">&lt;dt-ptero&gt;&lt;/dt-ptero&gt;<br/>   &lt;dt-trex&gt;&lt;/dt-trex&gt;</strong><br/>&lt;/div&gt;</span></pre><ul class=""><li id="9219" class="lx ly ht jk b jl jm jo jp jr lz jv ma jz mb kd mc md me mf bi translated">我在这里同时使用了<em class="ke">自定义CSS属性</em>和<em class="ke"> SASS变量</em>。是的，没有什么能阻止你同时使用这两种方法，实际上这很有意义(见下一个“尾声部分”)</li><li id="82ea" class="lx ly ht jk b jl mg jo mh jr mi jv mj jz mk kd mc md me mf bi translated">当前所有浏览器都支持自定义属性(如果没有IE，请参见<a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_variables#Browser_compatibility" rel="noopener ugc nofollow" target="_blank">兼容表</a>)。</li></ul><h1 id="63a5" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw bi translated">收场白</h1><p id="dcf7" class="pw-post-body-paragraph ji jj ht jk b jl kx iu jn jo ky ix jq jr kz jt ju jv la jx jy jz lb kb kc kd hb bi translated">所以现在你有了一个使用<em class="ke">自定义属性</em>的好例子，你可能会想:我们还需要像SASS变量这样的东西吗？如果答案是肯定的，那么什么时候使用哪种方法存储CSS值呢？</p><p id="7351" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">一般的回答是:</p><ul class=""><li id="f667" class="lx ly ht jk b jl jm jo jp jr lz jv ma jz mb kd mc md me mf bi translated">当您需要静态设置值时，当您需要在应用程序编译期间执行一些操作(例如<code class="du lc ld le lf b">`$color2 = lighten($mycolor)</code>)时，请使用SASS/Less。用途是定制你的一般css结构。量身定制你的自举/基础/等。满足你的需求。</li><li id="03df" class="lx ly ht jk b jl mg jo mh jr mi jv mj jz mk kd mc md me mf bi translated">当您需要动态更改值时，请使用自定义属性，例如，让用户设置无限种颜色组合。当您需要组件的这种主题化功能时，请使用它们:)</li></ul><p id="c2fb" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">如果你还有任何疑问，看看<a class="ae lq" href="https://www.smashingmagazine.com/2018/05/css-custom-properties-strategy-guide/" rel="noopener ugc nofollow" target="_blank">粉碎杂志</a>上这篇精彩的文章。</p><p id="f47f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">和往常一样:<strong class="jk mw">如果你学到了新东西，请:</strong></p><p id="a9ac" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><strong class="jk mw"> →鼓掌👏按钮</strong> below️这样更多的人可以看到这个<br/> <strong class="jk mw"> → </strong> <a class="ae lq" href="https://twitter.com/sulco" rel="noopener ugc nofollow" target="_blank"> <strong class="jk mw">在Twitter上关注我</strong>(@ sulco)</a>这样你就不会错过以后的帖子:</p><div class="hh hi ez fb hj mx"><a href="https://twitter.com/sulco" rel="noopener  ugc nofollow" target="_blank"><div class="my ab dw"><div class="mz ab na cl cj nb"><h2 class="hu b fi z dy nc ea eb nd ed ef hs bi translated">tomek sukowski(@ sulco)|推特</h2><div class="ne l"><h3 class="bd b fi z dy nc ea eb nd ed ef dx translated">Tomek sukowski(@ sul co)的最新推文。# TypeScript # JavaScript @ Angular trainer &amp; Angular Tricity…</h3></div><div class="nf l"><p class="bd b fp z dy nc ea eb nd ed ef dx translated">twitter.com</p></div></div><div class="ng l"><div class="nh l ni nj nk ng nl hp mx"/></div></div></a></div><figure class="lh li lj lk fd hk er es paragraph-image"><a href="https://medium.com/swlh"><div class="er es nm"><img src="../Images/308a8d84fb9b2fab43d66c117fcc4bb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YqDjlKFwScoQYQ62DWEdig.png"/></div></a></figure><h2 id="c148" class="mr kg ht bd kh nn no np kl nq nr ns kp jr nt nu kr jv nv nw kt jz nx ny kv nz bi translated">这篇文章发表在<a class="ae lq" href="https://medium.com/swlh" rel="noopener"> The Startup </a>上，这是Medium最大的创业刊物，拥有+386，297名读者。</h2><h2 id="869c" class="mr kg ht bd kh nn no np kl nq nr ns kp jr nt nu kr jv nv nw kt jz nx ny kv nz bi translated">在这里订阅接收<a class="ae lq" href="http://growthsupply.com/the-startup-newsletter/" rel="noopener ugc nofollow" target="_blank">我们的头条新闻</a>。</h2><figure class="lh li lj lk fd hk er es paragraph-image"><a href="https://medium.com/swlh"><div class="er es nm"><img src="../Images/b0164736ea17a63403e660de5dedf91a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ouK9XR4xuNWtCes-TIUNAw.png"/></div></a></figure></div></div>    
</body>
</html>