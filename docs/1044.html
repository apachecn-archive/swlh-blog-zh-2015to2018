<html>
<head>
<title>How Should You Organize Javascript In Rails App?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Rails App中应该如何组织Javascript？</h1>
<blockquote>原文：<a href="https://medium.com/swlh/how-should-you-organize-javascript-in-rails-app-3d6cccdd3e28?source=collection_archive---------4-----------------------#2017-10-30">https://medium.com/swlh/how-should-you-organize-javascript-in-rails-app-3d6cccdd3e28?source=collection_archive---------4-----------------------#2017-10-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/4474c1d47858408286503b079bdcad5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BPDI-NHjevNAi7WXzToa5Q.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">How Should You Organize Javascript In Rails App?</figcaption></figure><p id="567b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi js translated">当谈到<a class="ae kb" href="https://www.cognitiveclouds.com/custom-software-development-services" rel="noopener ugc nofollow" target="_blank">构建一个Rails应用</a>时，这里没有逃脱的JavaScript。不管我们是否喜欢，从一个小脚本到一个成熟的JavaScript框架网站，已经变得越来越依赖JavaScript。过去，对于一个项目，您需要的只是一个样式表。今天，Rails项目有一个资产管道，帮助我们创建不同的样式表或清单集。您浏览样式表，并将其全部绑定到javascript架构。这个资产管道使得在Rails应用程序中包含JavaScript变得更加容易。应用程序中包含的代码在所有页面上执行，无需任何额外的更改。然而，通过结合CSS类作用域和jQuery插件，您可以隔离某些JavaScript代码，使其只在特定页面上运行。</p><p id="6f7b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">说到资产，Rails是出了名的固执己见。你可以走手动路线，手动地包括任何地方的资产，但是最好把它们打包到一个文件中。这样，JavaScript只需加载一次，就可以缓存在客户机上。此外，使用Turbolinks时，页面加载速度更快，因为不需要加载更多内容，只需要替换正文。</p><p id="6140" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们都见过缺乏组织性、模块化和灵活性的Rails项目。不得不接管这些项目是一件令人头痛的事。Turbolinks就是为了解决这个问题。但是，如果您没有接触过Turbolinks以及它是如何帮助您组织JavaScript的，您可能已经将它从您的项目中删除了。在这里，我们给你介绍一下。</p><h1 id="d881" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">问题是</h1><p id="fd07" class="pw-post-body-paragraph iu iv hi iw b ix la iz ja jb lb jd je jf lc jh ji jj ld jl jm jn le jp jq jr hb bi translated">Rails的核心原则围绕着采用约定来简化团队工作和减少工作量。然而，当涉及到组织JavaScript文件时，并没有广泛或公认的实践。如果不一致，在一个<a class="ae kb" href="https://www.cognitiveclouds.com/custom-software-development-services/ruby-on-rails-development-company" rel="noopener ugc nofollow" target="_blank"> Rails应用程序</a>中留下一些JavaScript代码会很快变得笨拙。理想情况下，我们应该有一定的技术和指导方针来保持Javascript在我们的项目中有组织，此外，我们不希望必须禁用Turbolinks来使我们的应用程序按预期工作。</p><figure class="lf lg lh li fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/5ace383c5fc61f8f0ae2bc4b3caaf840.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-WeW24DNgb8b9N2gxIcnoA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx"><em class="lj">How should you organize JavaScript in Rails app</em></figcaption></figure><p id="2729" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">作为Rails开发者，我们习惯于约定胜于配置。因此，让我们设计一种机制，允许我们在组织Javascript代码时做下面提到的所有事情。</p><ul class=""><li id="4057" class="lk ll hi iw b ix iy jb jc jf lm jj ln jn lo jr lp lq lr ls bi translated">仅在特定页面上执行的页面特定代码</li><li id="341c" class="lk ll hi iw b ix lt jb lu jf lv jj lw jn lx jr lp lq lr ls bi translated">创建一个CoffeeScript文件和一个CoffeeScript类的能力，当页面加载时会自动执行</li><li id="f7fc" class="lk ll hi iw b ix lt jb lu jf lv jj lw jn lx jr lp lq lr ls bi translated">我们需要做的就是创建一个CoffeeScript类，它遵循我们的约定，当我们有了一个新页面时，无需进一步配置就可以执行。</li></ul><h1 id="2205" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">解决方案</h1><p id="2cb4" class="pw-post-body-paragraph iu iv hi iw b ix la iz ja jb lb jd je jf lc jh ji jj ld jl jm jn le jp jq jr hb bi translated">JavaScript的行为通常可以追溯到以下两类:</p><ul class=""><li id="beec" class="lk ll hi iw b ix iy jb jc jf lm jj ln jn lo jr lp lq lr ls bi translated"><strong class="iw ly">“始终在线”行为</strong></li><li id="c38d" class="lk ll hi iw b ix lt jb lu jf lv jj lw jn lx jr lp lq lr ls bi translated"><strong class="iw ly">和</strong> <a class="ae kb" href="https://www.datadab.com" rel="noopener ugc nofollow" target="_blank">行为触发<strong class="iw ly">用户动作</strong> </a></li></ul><p id="eebc" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在你处理这些之前，你需要处理一些事情来帮助你保持有条理。</p><ul class=""><li id="38d2" class="lk ll hi iw b ix iy jb jc jf lm jj ln jn lo jr lp lq lr ls bi translated">类范围:这不仅允许您在需要时通过jQuery控制对DOM的访问，还为您提供了某些高级样式类，使您能够轻松地添加特定于页面的CSS。</li><li id="957b" class="lk ll hi iw b ix lt jb lu jf lv jj lw jn lx jr lp lq lr ls bi translated">默认应用程序清单:这一步将确保文件夹中的javascript文件按字母顺序加载。</li><li id="18ac" class="lk ll hi iw b ix lt jb lu jf lv jj lw jn lx jr lp lq lr ls bi translated">“永远在线”的Javascript功能:一旦你有了默认的方式，开始添加一些行为。</li><li id="fa8a" class="lk ll hi iw b ix lt jb lu jf lv jj lw jn lx jr lp lq lr ls bi translated">用户触发的JavaScript:顾名思义，这种类型的JavaScript是作为用户点击或执行任何动作的结果而调用的Javascript。您可能习惯于在JavaScript目录中添加一个随机文件，并在这一步加入一些jQuery。虽然这样做在功能上可以很好地工作，但是在结构上保持这些文件的相似性会让您安心地继续工作。</li></ul><p id="4f19" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">希望您对如何在Rails应用程序中保持Javascript的组织性和可预测性有了一些了解。这种方法的一个好处是没有额外的插件。它使用了一个基本Rails应用程序中现有的所有工具，这意味着少了一件需要更新和维护的事情。T11】</p></div><div class="ab cl ma mb gp mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="hb hc hd he hf"><p id="b8f9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="lz">原载于</em> <a class="ae kb" href="https://www.cognitiveclouds.com/insights/" rel="noopener ugc nofollow" target="_blank"> <em class="lz">产品洞察博客</em> </a> <em class="lz">来自cognitive clouds:Top</em><a class="ae kb" href="https://www.cognitiveclouds.com/custom-software-development-services/ruby-on-rails-development-company" rel="noopener ugc nofollow" target="_blank"><em class="lz">Ruby on Rails开发公司</em> </a></p><figure class="lf lg lh li fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/731acf26f5d44fdc58d99a6388fe935d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6gfnVvkMRFtjVsWF7vkClA.png"/></div></div></figure><h2 id="fd41" class="mi kd hi bd ke mj mk ml ki mm mn mo km jf mp mq kq jj mr ms ku jn mt mu ky mv bi translated">这个故事发表在<a class="ae kb" href="https://medium.com/swlh" rel="noopener"> The Startup </a>上，这是Medium最大的企业家出版物，拥有293，189+人。</h2><h2 id="7945" class="mi kd hi bd ke mj mk ml ki mm mn mo km jf mp mq kq jj mr ms ku jn mt mu ky mv bi translated">在这里订阅接收<a class="ae kb" href="http://growthsupply.com/the-startup-newsletter/" rel="noopener ugc nofollow" target="_blank">我们的头条新闻</a>。</h2><figure class="lf lg lh li fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/731acf26f5d44fdc58d99a6388fe935d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6gfnVvkMRFtjVsWF7vkClA.png"/></div></div></figure></div></div>    
</body>
</html>