<html>
<head>
<title>Too Many Secrets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">太多秘密</h1>
<blockquote>原文：<a href="https://medium.com/swlh/too-many-secrets-9730f2293e83?source=collection_archive---------16-----------------------#2018-11-26">https://medium.com/swlh/too-many-secrets-9730f2293e83?source=collection_archive---------16-----------------------#2018-11-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="abb2" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">热情的合同需要安全且易于使用的秘密</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/56ac59f4f78c7db091a51c34a73f479d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tD2teCXNgUr4KOwQHrQRlg.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Secrets — Photo by <a class="ae jn" href="https://unsplash.com/photos/7E29j_4GBNI?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Gabby Orcutt</a> on <a class="ae jn" href="https://unsplash.com/search/photos/hiding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="392e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在电影<a class="ae jn" href="http://www.imdb.com/title/tt0105435/" rel="noopener ugc nofollow" target="_blank">球鞋(1992) </a>中，有一个主角正在调查的神秘公司叫做“Setec天文学”。有一个关键的场景是，罗伯特·雷德福放下拼字游戏瓷砖，拼出了“Setec Astronomy”这个名字，然后开始重新排列字母，发现这个名字是“太多秘密”的变位词，该公司正在从事破解代码的业务。时间快进26年，破解密码不再是好莱坞大片的专利——许多人通过泄露秘密破解私人密钥和劫持加密货币账户，过上了体面的生活。</p><p id="78be" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在我之前的<a class="ae jn" href="https://hackernoon.com/hashed-secrets-to-the-rescue-1ddc1daff83e" rel="noopener ugc nofollow" target="_blank">轻量级契约文章</a>中，我解释了我们如何使用一个秘密散列来确保触发契约的事务，以及作为响应由契约提交的事务，可以同时被批准或者同时被忽略。这就提出了一个问题:如何生成一个好的秘密？</p><p id="615f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们产生的秘密必须是:</p><ol class=""><li id="06b7" class="kk kl hi jq b jr js ju jv jx km kb kn kf ko kj kp kq kr ks bi translated">难以破解—理想情况下，它应该像帐户密码一样强。</li><li id="9580" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">unique-机密必须是唯一的，因为一旦机密被泄露，其散列就永远不能被安全地重复使用。</li><li id="c7be" class="kk kl hi jq b jr kt ju ku jx kv kb kw kf kx kj kp kq kr ks bi translated">简单易记——在某些情况下，我们需要在提交散列后很久才揭示秘密。理想情况下，记住一个秘密应该是简单的，甚至在秘密丢失的情况下，秘密生成器可以恢复秘密。</li></ol><p id="5d23" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">一个天真的尝试是把我的狗的名字和我的猫的名字连在一起，并添加我的结婚日期作为额外安全的后缀。这个秘密的确很容易记住，但它不是唯一的，一旦我把它透露给区块链，我就再也不能使用它了。此外，如果吴决定用他的散列法来破解它，这当然是不安全的。在末尾添加一个计数器将保证唯一性，但对于配备有<a class="ae jn" href="https://crackstation.net/" rel="noopener ugc nofollow" target="_blank">彩虹桌</a>的攻击者来说，这几乎没有帮助。</p><p id="be0d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">但是等一下，作为一个热情的用户，我已经拥有了一条不可能被暴力破解的信息:我的账户密码。我们能用它做些什么吗？</p><p id="2801" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们可以使用密码短语本身作为秘密吗？当然不会，因为我们不想把它透露给区块链。我们可以使用密码的散列作为秘密吗？不唯一。该死的。如果我们在密码末尾添加一个计数器，然后对其进行哈希运算，会怎么样？现在我们有所进展，这是安全和独特的。</p><p id="9cb9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">密码短语和一次性唯一数字(我们称之为“随机数”)的连接散列将生成唯一的秘密，只要您记住随机数，就很容易记住该秘密。我们假设您记得密码，因为如果您不记得，一切都会丢失。</p><p id="7c50" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是一个非常好的秘密生成过程:每当我们需要一个秘密时，我们将nonce加1，将其与密码短语连接，使用SHA256对其进行哈希运算，并将其用作秘密。当提交散列秘密时，我们当然再次散列它。</p><p id="2442" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">但是仍然存在问题，如果我们需要生成大量的秘密，比如数百万个，随机数就变得很难记住。如果我们在多个工作站上生成秘密，则很难确保现时唯一性，因此存在我们不时重复秘密的风险。</p><p id="c904" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq ky">解决方案——生成无法破解的、唯一的、简单易记的秘密，甚至可以在丢失的情况下被生成器复制</strong></p><p id="2b15" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为了解决这个问题，我们需要添加另一个扭曲，我们连接到秘密的末尾，已经由密码+ nonce组成，一个块的块id是过去的“nonce”块，我们将nonce的范围限制在1到9999之间。然后我们散列得到的字符串，并把它作为一个秘密。当提交带有散列秘密的交易时，我们再次散列这个秘密，并且一旦我们验证了契约操作，就公开它以批准我们的交易。</p><p id="e98a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们的新秘密是安全的，因为它是基于只有我们知道的帐户密码。它是独一无二的，因为它基于递增的计数器和每分钟都在变化的块id。最后，这很容易记住，因为我们需要记住的只是生成秘密时的块高度和四位随机数。</p><p id="c2dd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">即使我们忘记了我们的秘密，我们也可以很容易地恢复它，我们需要做的只是检查每个积木高度的10000个组合，这是一个任何现代工作站都可以执行的简单计算。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kz"><img src="../Images/3617dd3e0c624670043e764700c85de1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*LrqjW0Ng-lAVG61gCHxmRw.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx">Generate a Secure Secret</figcaption></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><a href="https://medium.com/swlh"><div class="er es la"><img src="../Images/308a8d84fb9b2fab43d66c117fcc4bb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YqDjlKFwScoQYQ62DWEdig.png"/></div></a></figure><h2 id="c148" class="lb lc hi bd ld le lf lg lh li lj lk ll jx lm ln lo kb lp lq lr kf ls lt lu lv bi translated">这篇文章发表在<a class="ae jn" href="https://medium.com/swlh" rel="noopener">《创业</a>》上，这是Medium最大的创业刊物，有+393，714人关注。</h2><h2 id="869c" class="lb lc hi bd ld le lf lg lh li lj lk ll jx lm ln lo kb lp lq lr kf ls lt lu lv bi translated">订阅接收<a class="ae jn" href="http://growthsupply.com/the-startup-newsletter/" rel="noopener ugc nofollow" target="_blank">我们的头条新闻</a>。</h2><figure class="iy iz ja jb fd jc er es paragraph-image"><a href="https://medium.com/swlh"><div class="er es la"><img src="../Images/b0164736ea17a63403e660de5dedf91a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ouK9XR4xuNWtCes-TIUNAw.png"/></div></a></figure></div></div>    
</body>
</html>