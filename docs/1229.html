<html>
<head>
<title>What Should You Know About Deploying A Rails App On AWS Elastic Beanstalk?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于在AWS Elastic Beanstalk上部署Rails应用程序，你应该知道什么？</h1>
<blockquote>原文：<a href="https://medium.com/swlh/what-should-you-know-about-deploying-a-rails-app-on-aws-elastic-beanstalk-fa47b9d834ed#2017-11-23">https://medium.com/swlh/what-should-you-know-about-deploying-a-rails-app-on-aws-elastic-beanstalk-fa47b9d834ed#2017-11-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/970abc45905297f4c2c3dc254762a2d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dum2FPEoMRDAcTgHpVJywg.jpeg"/></div></div></figure><p id="9c6a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi jo translated">感觉今天每个人都想构建下一个伟大的可伸缩web应用。在部署和扩展我们的Web应用程序方面，Amazon Web Services已经成为领先的云提供商之一。如果你是AWS的新手，这可能会让人不知所措。今天，有40多种不同的AWS服务，在构建应用程序时需要考虑许多概念。然而，AWS提供了有用的指南、关于其每项服务的优秀文档、白皮书、常见应用的参考架构等等。现在，对于Rails，采用它的想法并不仅仅是因为它的技术性，而是因为它是一个为初创公司开发的生态系统。由于Twitter、Groupon和Hulu等大牌用户以及所有宣传Rails的敏捷人士，引发了对Heroku、AWS、New Relic和Github等服务的需求，从而使Rails得以扩展。</p><p id="5003" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有更多的提供者，在部署web应用程序方面没有AWS复杂。然而，部署可扩展的web应用程序会带来一些独特的复杂性，依靠巨人的肩膀来完成这项工作会有所帮助。现在，您可能正在通过在AWS上构建基础设施来解决这些复杂问题。即便如此，使用Elastic Beanstalk，您可以获得完全可伸缩的解决方案，而不必自己配置所有组件。</p><p id="9152" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">可扩展的web应用程序自动提供额外的资源，无需任何人工干预或帮助。在这种类型的自动化编排中，您将需要相当多的基础设施，这需要时间来配置。想象一个基础设施，包括应用服务器、负载平衡器、数据库服务器、防火墙、日志聚合、监控和警报。如果不进行自动化，基础设施的几乎每个组件都需要更新，以使其了解新的资源。现在有了Elastic Beanstalk，资源的创建和删除是自动处理的，因为它包含了健壮基础设施的所有组件。换句话说，如果您希望尽快扩展，这是理想之选。下面是在AWS Elastic Beanstalk上部署Rails应用程序的步骤。</p><figure class="jy jz ka kb fd ij er es paragraph-image"><div class="er es jx"><img src="../Images/b968b2011846ae8e8f7fc731580956b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*sdrIeGeLfutcjAhVdsDw7w.png"/></div></figure><h1 id="fdcf" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">1)首先，确保应用程序在Docker容器中本地运行</h1><p id="a856" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">请随意将docker文件建立在官方Rails图像的基础上。如果您习惯使用Heroku，使用Herokuish可以节省您几个小时的时间来确定您的应用程序需要安装哪些依赖项。最终，应该可以使用Docker在本地运行您的应用程序，并使用ENV变量控制其参数。</p><h1 id="9004" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">2)准备虚拟私有云</h1><p id="3f5a" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">如果你是AWS新手，建立虚拟私有云可能会是一场噩梦。从最简单的设置开始，一步一步来。按照VPC创建向导配置一个简单的三个公共子网VPC。看到了吧，当你启动的时候，没有理由把私有子网的事情复杂化，因为你总是可以使用安全组来限制访问。</p><h1 id="a777" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">3)为Postgres数据库使用亚马逊关系数据库服务(RDS)</h1><p id="cc89" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">首先，将一个RDS实例启动到刚刚创建的VPC中。就像最后一点，只要按照向导，你会设法做一个体面的工作。此外，确保在Elastic Beanstalk中运行应用程序之前创建数据库并运行迁移。</p><h1 id="4dd1" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">4)准备弹性豆茎环境</h1><p id="25ac" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">如果您不熟悉Elastic Beanstalk，可以从UI向导开始帮助您。说到平台，选择通用部分下的多容器Docker选项。该选项将指示Elastic Beanstalk使用ECS (Docker容器的编排服务)。看，ECS比常规的Docker平台强大得多，它允许您在应用程序中部署多个Docker容器。如果您希望包含用于监控或日志聚合的第三方插件，这将证明是非常有用的。如果您计划使用SSL，请确保将您的SSL证书上传到证书管理器或ACM。稍后，您可以将此证书分配给您的ELB(负载平衡器)。确保在security部分为您的实例分配一个安全组，该组可以访问您刚刚创建的Postgres数据库。此外，在“网络”部分，确保您选择了上面创建的VPC。</p><h1 id="a921" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">5)将应用程序的Docker图像上传到注册表</h1><p id="70a3" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">您可以使用AWS ECR，它可以很好地与Elastic Beanstalk集成，或者如果您愿意，也可以与Dockerhub的私有存储库集成。</p><h1 id="ea79" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">6)命令行界面(CLI)将允许您部署应用程序</h1><p id="19eb" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">下载Elastic Beanstalk的CLI (eb)。您将需要它来将您的应用程序部署到新创建的环境中。描述如何使用“Dockerrun.aws.json”文件部署Docker容器。到目前为止，您已经创建了几乎所有需要的AWS资源。继续运行“eb deploy”命令，您的应用程序将部署到新环境中。</p><h1 id="4943" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">结论</h1><p id="66f4" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">到目前为止，您应该已经意识到将新的Rails应用程序部署到Elastic Beanstalk的过程并不像部署到Heroku那样简单和简化。因此，建议在小项目中使用Heroku，如果你在一家初创公司工作，在你的初始阶段。当您的产品增长时，您总是可以迁移到AWS，并且理想情况下，您有更多的资源来投资设置和管理AWS资源。</p><p id="a1f9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">总之，确保AWS适合您的工作负载。如果您保持所有服务器24/7在线，并且基本上没有弹性工作负载，那么可以从其他提供商那里寻找专用硬件。当您可以利用AWS的能力在需要时加速和减速您的实例时，AWS是有意义的。</p></div><div class="ab cl lf lg gp lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hb hc hd he hf"><p id="fa8c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lm">原载于</em> <a class="ae ln" href="https://www.cognitiveclouds.com/insights/what-should-you-know-about-deploying-a-rails-app-on-aws-elastic-beanstalk/" rel="noopener ugc nofollow" target="_blank"> <strong class="is lo"> <em class="lm">产品洞察博客</em></strong></a><strong class="is lo"><em class="lm"/></strong><em class="lm">来自cognitive clouds:Top</em><a class="ae ln" href="https://www.cognitiveclouds.com/custom-software-development-services/ruby-on-rails-development-company" rel="noopener ugc nofollow" target="_blank"><em class="lm">Ruby on Rails开发公司</em> </a></p><figure class="jy jz ka kb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/731acf26f5d44fdc58d99a6388fe935d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6gfnVvkMRFtjVsWF7vkClA.png"/></div></div></figure><h2 id="fd41" class="lq kd hi bd ke lr ls lt ki lu lv lw km jb lx ly kq jf lz ma ku jj mb mc ky md bi translated">这个故事发表在<a class="ae ln" href="https://medium.com/swlh" rel="noopener"> The Startup </a>上，这是Medium最大的创业刊物，拥有295，232+人关注。</h2><h2 id="7945" class="lq kd hi bd ke lr ls lt ki lu lv lw km jb lx ly kq jf lz ma ku jj mb mc ky md bi translated">在这里订阅接收<a class="ae ln" href="http://growthsupply.com/the-startup-newsletter/" rel="noopener ugc nofollow" target="_blank">我们的头条新闻</a>。</h2><figure class="jy jz ka kb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/731acf26f5d44fdc58d99a6388fe935d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6gfnVvkMRFtjVsWF7vkClA.png"/></div></div></figure></div></div>    
</body>
</html>