<html>
<head>
<title>Best practices for integrating Stripe Billing with your SaaS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将条纹计费与SaaS集成的最佳实践</h1>
<blockquote>原文：<a href="https://medium.com/swlh/best-practices-for-integrating-stripe-billing-with-your-saas-559747ae7062?source=collection_archive---------3-----------------------#2018-09-19">https://medium.com/swlh/best-practices-for-integrating-stripe-billing-with-your-saas-559747ae7062?source=collection_archive---------3-----------------------#2018-09-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/e805f18563ed6ff09e046d551dc503e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MbiTI_U2iZIkKeTg.png"/></div></div></figure><p id="3a25" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Stripe已迅速成为市场上领先的计费解决方案之一，尤其受到销售软件即服务的企业的青睐。通过阅读本指南，您将了解如何确保PCI合规性，以及使用条带构建前端和后端集成的最佳方式。</p><h1 id="1890" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">安全性—确保PCI合规性</h1><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/c245fd1cff36052ec2a02e2d3aaf827b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YXnRiyt4Loeb2iBIjIOohg.png"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx">The Stripe PCI Compliance Dashboard</figcaption></figure><p id="c775" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">任何存储、传输或处理信用卡数据的公司都必须遵守<a class="ae kv" href="https://www.pcisecuritystandards.org/" rel="noopener ugc nofollow" target="_blank">支付卡行业(PCI)数据安全标准</a>。如果您使用<a class="ae kv" href="https://stripe.com/docs/security" rel="noopener ugc nofollow" target="_blank">的安全标准</a>与Stripe集成，您将自动获得PCI合规资格，他们将自动生成所需的<a class="ae kv" href="https://www.pcisecuritystandards.org/document_library?category=saqs#results" rel="noopener ugc nofollow" target="_blank">自我评估问卷</a> (SAQ)和合规证明，您可以从您的<a class="ae kv" href="https://dashboard.stripe.com/account/compliance" rel="noopener ugc nofollow" target="_blank">合规仪表板</a>下载。Stripe建议遵守以下项目以保持PCI合规性:</p><blockquote class="kw kx ky"><p id="e896" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated">使用<a class="ae kv" href="https://stripe.com/docs/checkout" rel="noopener ugc nofollow" target="_blank"> Checkout </a>、<a class="ae kv" href="https://stripe.com/docs/stripe-js" rel="noopener ugc nofollow" target="_blank"> Stripe.js和Elements </a>或我们的<a class="ae kv" href="https://stripe.com/docs/mobile" rel="noopener ugc nofollow" target="_blank"> mobile SDK库</a>来收集支付信息，这些信息会直接安全地传输到Stripe，而无需通过您的服务器</p><p id="af28" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated">使用<a class="ae kv" href="https://stripe.com/docs/security#tls" rel="noopener ugc nofollow" target="_blank">传输层安全性</a> (TLS)安全地服务您的支付页面，以便它们使用HTTPS</p><p id="533c" class="iq ir kz is b it iu iv iw ix iy iz ja la jc jd je lb jg jh ji lc jk jl jm jn hb bi translated">每年审查并<a class="ae kv" href="https://stripe.com/docs/security#validating-pci-compliance" rel="noopener ugc nofollow" target="_blank">验证</a>您帐户的PCI合规性</p></blockquote><p id="0245" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当与Stripe API集成时，您使用的密钥必须存储在一个安全的地方。避免在版本控制中存储密钥；这可能导致客户数据的安全漏洞，并可能给您的企业带来巨大的问题。</p><h1 id="e790" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">前端—使用条带元素</h1><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/92d734974a7ce695c1e32b31a8a8383c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AE-G1-JXkw0megUg.png"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx">An Example Site Using Stripe Elements</figcaption></figure><p id="ce55" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于一个SaaS来说，<a class="ae kv" href="https://stripe.com/elements" rel="noopener ugc nofollow" target="_blank"> Stripe Elements </a>是一个很棒的工具，可以创建一个很棒的结帐页面，以适应您的特定用例。他们有预建的UI组件，如信用卡输入和支付按钮。这些服务器在处理信用卡数据的同时，通过将数据直接发送到条带来维护PCI合规性，而无需通过您自己的服务器。它们可以根据屏幕大小进行定制，以适合您的业务风格，并且可以本地化为您客户的首选语言。</p><p id="d1cd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Stripe Elements只是为客户提供一种输入支付信息的工具。作为一家SaaS公司，您仍然需要开发前端解决方案来处理其他功能，例如当客户升级或降级到不同的订阅计划、取消他们的服务或重新订阅时。</p><h1 id="a575" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">后端—使用条带API库和Webhooks</h1><p id="a743" class="pw-post-body-paragraph iq ir hi is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hb bi translated">后端的条带集成由两部分组成:主动集成和被动集成。<strong class="is lj">主动</strong>是对Stripe API的直接调用，用于执行取消订阅等操作，<strong class="is lj">间接</strong>是事件处理程序，用于响应Stripe中的事件，如信用卡支付失败。</p><p id="3241" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">进行API调用的最佳方式是使用官方的<a class="ae kv" href="https://stripe.com/docs/libraries" rel="noopener ugc nofollow" target="_blank"> Stripe API库</a>。有了这个，您就可以开始构建处理您想要为您的特定SaaS覆盖的所有用例所需的逻辑。</p><p id="17ce" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae kv" href="https://stripe.com/docs/webhooks" rel="noopener ugc nofollow" target="_blank"> Webhooks </a>是API调用，Stripe可以将其发送到您选择的端点，以便在Stripe中发生事件时提醒您。这对于允许您对支付失败做出响应以及当客户的信用卡失败时自动限制对您的应用程序的访问非常有用。</p><p id="153d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">构建集成时，请注意以下几点:</p><ul class=""><li id="8d11" class="lk ll hi is b it iu ix iy jb lm jf ln jj lo jn lp lq lr ls bi translated">让你的Stripe密钥不受版本控制，以防止你的Stripe账户被黑客攻击</li><li id="301f" class="lk ll hi is b it lt ix lu jb lv jf lw jj lx jn lp lq lr ls bi translated">使用条带测试密钥进行所有开发，确保不会破坏您的生产客户数据</li><li id="9ab4" class="lk ll hi is b it lt ix lu jb lv jf lw jj lx jn lp lq lr ls bi translated">使用webhooks时，检查<a class="ae kv" href="https://stripe.com/docs/webhooks/signatures" rel="noopener ugc nofollow" target="_blank">条带签名</a>以确保请求有效</li><li id="3ec8" class="lk ll hi is b it lt ix lu jb lv jf lw jj lx jn lp lq lr ls bi translated">确保您的集成保持数据库中的用户与条带中的客户的一对一映射。一些企业错误地使用同一个电子邮件创建了多个客户，这可能会在以后尝试编写更复杂的集成代码时造成问题。</li><li id="d329" class="lk ll hi is b it lt ix lu jb lv jf lw jj lx jn lp lq lr ls bi translated">将API版本锁定为您开发和测试的版本；如果你没有被锁定在一个特定版本上，Stripe可以改变他们的API并破坏你的代码；<a class="ae kv" href="https://stripe.com/docs/building-plugins#set-api-version" rel="noopener ugc nofollow" target="_blank">以下是你的操作方法</a>。</li></ul><h1 id="a2d0" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">使用Stripe合作伙伴来避免开发</h1><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/01d5303f91635283c31c317d820bcd88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FPDCEbVmo13roSLi.png"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx"><a class="ae kv" href="https://servicebot.io" rel="noopener ugc nofollow" target="_blank">Servicebot</a> Generates PCI Compliant UI Components connected to Stripe</figcaption></figure><p id="4c38" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Stripe做了很多现成的东西，但大多数SaaS公司需要的不仅仅是基本框架。定价页面和计费设置页面等功能，客户可以在这些页面上管理自己的订阅。</p><p id="a5cb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你不想花费大量资源开发和维护你自己与Stripe的集成，有<a class="ae kv" href="https://stripe.com/works-with/type/platform/category/recurring-payments" rel="noopener ugc nofollow" target="_blank"> Stripe验证合作伙伴</a>可以提供现成的集成，你可以放入你的应用。<a class="ae kv" href="https://servicebot.io" rel="noopener ugc nofollow" target="_blank"> Servicebot </a>通过生成定价页面、计费管理和结账页面等嵌入式组件，无需花费时间进行开发，即可轻松将您的SaaS连接到Stripe。</p><h1 id="8720" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">结论</h1><p id="87a9" class="pw-post-body-paragraph iq ir hi is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hb bi translated">为SaaS构建条带集成时，需要构建许多移动部件。使用Stripe元素开发前端，使用Stripe的一个库开发后端，并处理Stripe webhooks发送的事件，这些都是可靠的Stripe集成的构建块。</p><p id="3ee8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您希望最小化SaaS计费解决方案的开发，您应该考虑Stripe合作伙伴，如<a class="ae kv" href="https://servicebot.io" rel="noopener ugc nofollow" target="_blank">服务机器人</a></p><figure class="kn ko kp kq fd ij er es paragraph-image"><a href="https://medium.com/swlh"><div class="er es ld"><img src="../Images/308a8d84fb9b2fab43d66c117fcc4bb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YqDjlKFwScoQYQ62DWEdig.png"/></div></a></figure><h2 id="48f8" class="ly jp hi bd jq lz ma mb ju mc md me jy jb mf mg kc jf mh mi kg jj mj mk kk ml bi translated">这篇文章发表在<a class="ae kv" href="https://medium.com/swlh" rel="noopener"> The Startup </a>上，这是Medium最大的创业刊物，有+ 370，107人关注。</h2><h2 id="24b8" class="ly jp hi bd jq lz ma mb ju mc md me jy jb mf mg kc jf mh mi kg jj mj mk kk ml bi translated">订阅接收<a class="ae kv" href="http://growthsupply.com/the-startup-newsletter/" rel="noopener ugc nofollow" target="_blank">我们的头条新闻</a>。</h2><figure class="kn ko kp kq fd ij er es paragraph-image"><a href="https://medium.com/swlh"><div class="er es ld"><img src="../Images/b0164736ea17a63403e660de5dedf91a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ouK9XR4xuNWtCes-TIUNAw.png"/></div></a></figure></div></div>    
</body>
</html>