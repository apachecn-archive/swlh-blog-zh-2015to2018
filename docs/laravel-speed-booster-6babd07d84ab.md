# æ‹‰å‹’ç»´å°”å¢é€Ÿå™¨

> åŸæ–‡ï¼š<https://medium.com/swlh/laravel-speed-booster-6babd07d84ab>

![](img/22f727fe4bb1046eebafb61ba5aeda30.png)

æˆ‘çŒœæƒ³æ—¢ç„¶ä½ åœ¨è¿™é‡Œï¼Œä½ å·²ç»åœ¨ä½¿ç”¨ Laravelï¼Œæˆ‘ä¹ŸçŒœæƒ³ä½ ç”¨äº†è¶³å¤Ÿçš„æ—¶é—´æ¥è¾¾åˆ°è¿™ä¸ªæ°´å¹³ï¼Œä½ å¼€å§‹è°ƒæ•´å®ƒçš„å·¥ä½œæ–¹å¼å¹¶åŠ ä»¥æ”¹è¿›ã€‚æ˜¯çš„ï¼Œæˆ‘åŒæ„ Laravel æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„ PHP æ¡†æ¶ï¼Œä½†æ˜¯å¯¹äºå¤§å¤šæ•°åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œå®ƒçš„ä»£ç åº“å¤ªæŠ½è±¡å’Œæ™®é€šäº†ï¼Œå®ƒè¯•å›¾è¦†ç›–åº”ç”¨ç¨‹åºå¯èƒ½æœ‰çš„æ‰€æœ‰æƒ…å†µã€‚
ä½†æ˜¯ï¼Œæ¯å½“ä½ åšä¸€äº›è¿‡äºæŠ½è±¡æˆ–æ™®é€šçš„ä¸œè¥¿æ—¶ï¼Œä½ ä¼šå¢åŠ é¢å¤–çš„ä¸å¿…è¦çš„å¤æ‚æ€§å’Œæµªè´¹çš„é€Ÿåº¦ï¼Œå¦‚æœä½ æ‹…å¿ƒæ€§èƒ½ï¼Œè¿™è‚¯å®šä¼šæƒ¹æ¼ä½ (æˆ‘ç›®å‰çš„å…¬å¸å°±æ˜¯è¿™ç§æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬è¿›è¡Œäº†è°ƒæŸ¥)ã€‚

[![](img/78437253c88bc323dbb42fb6cd5c79da.png)](https://www.awin1.com/cread.php?s=2325653&v=6798&q=295495&r=628669)

å½“ç„¶ï¼Œå½“æˆ‘ä»¬åœ¨è¿™é‡Œè°ˆè®ºæ€§èƒ½æ”¹è¿›æ—¶ï¼Œæˆ‘ä»¬è°ˆè®ºçš„æ˜¯æ¯«ç§’ï¼Œå°¤å…¶æ˜¯å¦‚æœä½ æ‹…å¿ƒ[è°·æ­Œçš„æ¨è](https://developers.google.com/speed/docs/insights/Server)ä½äº 200 æ¯«ç§’ã€‚

> æ‚¨åº”è¯¥å°†æœåŠ¡å™¨å“åº”æ—¶é—´å‡å°‘åˆ° 200 æ¯«ç§’ä»¥ä¸‹ã€‚æœ‰è®¸å¤šæ½œåœ¨çš„å› ç´ å¯èƒ½ä¼šé™ä½æœåŠ¡å™¨çš„å“åº”é€Ÿåº¦:ç¼“æ…¢çš„åº”ç”¨ç¨‹åºé€»è¾‘ã€ç¼“æ…¢çš„æ•°æ®åº“æŸ¥è¯¢ã€ç¼“æ…¢çš„è·¯ç”±ã€æ¡†æ¶ã€åº“ã€èµ„æº CPU ä¸è¶³æˆ–å†…å­˜ä¸è¶³ã€‚

åœ¨ç½‘ç«™é€Ÿåº¦æ–¹é¢æœ‰ä¸€äº›å®¢æˆ·ç«¯çš„æ”¹è¿›å¯ä»¥çœŸæ­£æ”¹å–„ä½ çš„ç”¨æˆ·ä½“éªŒ[ï¼Œå…¶ä»–ä¸“å®¶å¯ä»¥è°ˆè®ºè¿™äº›](/@ra.hul/kickass-your-website-front-end-speed-fedeaa51df36)ï¼Œä½†æ˜¯æˆ‘ä»¬å°†åœ¨è¿™é‡Œè°ˆè®ºæœåŠ¡å™¨ç«¯çš„æ”¹è¿›ã€‚

æˆ‘ä»¬å¼€å§‹å§..

å› æ­¤ï¼Œç»è¿‡ä¸€äº›è°ƒæŸ¥å’Œåˆ†æï¼Œæˆ‘ä»¬å‘ç°äº†æ‹‰å‹’ç»´å°”æ½œåœ¨çš„æ”¹è¿›ä¹‹å¤„:

*   è§†å›¾ç®¡é“
*   è§†å›¾æ¸²æŸ“
*   å¤ªå¤šä¸­é—´ä»¶
*   è·¯çº¿ç¼“å­˜:
*   å…¶ä»– PHP ä¼˜åŒ–

# è§†å›¾ç®¡é“

æ­£å¦‚æˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„ï¼ŒLaravel æ·»åŠ äº†è®¸å¤šé€šç”¨çš„ä¸œè¥¿æ¥åŒ…å«æ‰€æœ‰çš„å¯èƒ½æ€§ï¼Œåœ¨è§†å›¾çš„æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯æ•°æ®çš„åŠ è½½å’Œæ£€æŸ¥è¿‡ç¨‹ï¼Œå½“æ¸²æŸ“å‡½æ•°å‘ç”Ÿæ—¶å‘ç”Ÿã€‚

æ›´å…·ä½“åœ°è¯´ï¼Œæ¯æ¬¡æ¸²æŸ“çš„å¼€é”€ä¹‹ä¸€æ˜¯ **Illuminate\View** ä¸­çš„å‡½æ•° **gatherData** ï¼Œå¦‚æœä½ çš„ç½‘ç«™æœ‰ä¸€ä¸ªéå¸¸åµŒå¥—çš„ç»“æ„ï¼Œå³å¤§é‡çš„@includesã€@sectionsã€@layoutsã€@for loopsï¼Œ..ï¼Œç­‰ç­‰

æ‚¨ä¼šåœ¨è¿™ä¸ªå‡½æ•°ä¸­æ‰¾åˆ°ä»¥ä¸‹ä»£ç :

```
$data = array_merge($this->factory->getShared(), $this->data);**foreach** ($data **as** $key => $value) {
    **if** ($value **instanceof** Renderable) {
        $data[$key] = $value->render();
    }
}**return** $data;
```

æ ¹æ®æˆ‘çš„ç»éªŒï¼Œå¾ˆå°‘æœ‰äººä½¿ç”¨å¸¦æœ‰ Renderable passed çš„è§†å›¾ã€‚

æ‰€ä»¥æœ€æ£’çš„æ˜¯è¦†ç›– Laravel çš„åŠŸèƒ½[æˆ‘ä¸ä¼šè¯´å¦‚ä½•è¦†ç›–ï¼›è°·æ­Œä¸Šæœ‰å¾ˆå¤šè¿™æ ·çš„æ–¹æ³•]å¹¶ç¼–å†™å¦‚ä¸‹ä»£ç :

```
**protected function** gatherData()
{
    $data = array_merge($this->factory->getShared(), $this->data);

    **return** $data;
}
```

è¿™æ ·åšä¹‹åï¼Œæ‚¨ä¼šæ³¨æ„åˆ°æ€§èƒ½çš„æé«˜ï¼Œè¿™å–å†³äºæœåŠ¡å™¨çš„é€Ÿåº¦/é¡µé¢å¤§å°ç­‰ç­‰ã€‚

åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå¢é‡å¤§çº¦æ˜¯æœåŠ¡å™¨ç«¯åŠ è½½æ—¶é—´çš„ 5-10%[å¤§çº¦ 20 æ¯«ç§’]ã€‚

# è§†å›¾æ¸²æŸ“:

ä¸Šé¢æåˆ°çš„è§†å›¾æ¸²æŸ“æ˜¯åœ¨ä¸€ä¸ªä¼šè¯è°ƒç”¨ä¸­ç»å¸¸å‘ç”Ÿçš„äº‹æƒ…ï¼Œäº‹æƒ…æ˜¯è¿™ä¸ª[æ¸²æŸ“å‡½æ•°](https://laravel.com/api/5.3/Illuminate/View/View.html#method_render)çš„ç®¡é“æ˜¯å®ƒä»¥é€’å½’çš„æ–¹å¼å·¥ä½œã€‚

å¦‚æœæ‚¨çš„é¡µé¢åŒ…å«å‡ ä¸ªéƒ¨åˆ†ï¼Œè€Œæ²¡æœ‰å¾ˆå¤šåµŒå¥—è§†å›¾ï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨ä½¿ç”¨å¾ˆå¤š@ includes/@éƒ¨åˆ†ï¼Œå°¤å…¶æ˜¯åœ¨ ForLoops ä¸­çš„éƒ¨åˆ†ï¼Œé‚£ä¹ˆæ‚¨çš„é€Ÿåº¦å¯èƒ½ä¼šå¤§å¤§é™ä½ã€‚

è¿™ä¹ˆè¯´å§ï¼Œå¦‚æœä½ åœ¨ä¸€ä¸ªé¡µé¢é‡Œæœ‰ 100 ä¸ªäº§å“ï¼Œå¤§æ¦‚æ˜¯è¿™æ ·çš„:

```
**@foreach (**$products **as** $key => $item) **@include(** 'productView',
          [
            'product' => $item,
          ]
        **)
@endforeach**
```

å‡è®¾åœ¨äº§å“è§†å›¾ä¸­æœ‰ä¸¤ä¸ªå…¶ä»–çš„åŒ…å«ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“è§†å›¾è¢«å‘ˆç°æ—¶ï¼Œå°†å¯¼è‡´ 200 æ¬¡å‘ˆç°è°ƒç”¨ã€‚
åœ¨æˆ‘ä»¬åˆ†æäº†æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºåï¼Œæˆ‘ä»¬å‘ç°é€Ÿåº¦å› æ­¤æ˜¾è‘—ä¸‹é™ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æ˜¯:

*   è®¾ç½®ä¸€ä¸ªæ ‡å‡†ï¼Œé¿å…è¶…è¿‡ 2 ä¸ªåµŒå¥—çº§åˆ«ï¼Œä»¥é¿å…è¿‡å¤šçš„æ¸²æŸ“ã€‚
*   æ‰å¹³åŒ–ä½ çš„è§‚ç‚¹ï¼Œå°‘ç”¨ includes(è¿™å½“ç„¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„è§£å†³æ–¹æ¡ˆã€‚å¦‚æœæ˜¯é•¿æœŸç»´æŠ¤çš„å¹³å°)ã€‚
*   ä½¿ç”¨ä¸€ä¸ªåº“ï¼Œå®ƒå°†ä½¿ä½ å¯¹ç”Ÿäº§éƒ¨ç½²è¿‡ç¨‹çš„çœ‹æ³•å˜å¾—æ‰å¹³(å› ä¸ºæˆ‘æ²¡æœ‰æ‰¾åˆ°è¿™æ ·åšçš„åŒ…ï¼Œæ‰€ä»¥æˆ‘å†™äº†ä¸€ä¸ª[ç¼–è¯‘åˆ€ç‰‡](https://github.com/Te-cho/compile-blades))ã€‚
    (è¯·æ³¨æ„ï¼Œå¦‚æœä½ çš„åˆ€ç‰‡ä¸­æœ‰å¤ªå¤šä»£ç ï¼Œä¹Ÿä¼šé€ æˆé€Ÿåº¦å¤§å¹…ä¸‹é™ï¼Œæ‰€ä»¥ä½ å¿…é¡»é€‰æ‹©ä¸€ä¸ªä¸­é—´ç‚¹)ã€‚

# å¤ªå¤šä¸­é—´ä»¶:

ä¹Ÿè®¸ä½ çŸ¥é“ï¼Œä¹Ÿè®¸ä½ ä¸çŸ¥é“ï¼ŒLaravel çš„ä¸»è¦ç‰¹æ€§æœ‰å¾ˆå¤šç®¡é“å¼€é”€ï¼Œæ‰€ä»¥æˆ‘å»ºè®®ä¸è¦ä½¿ç”¨å¾ˆå¤šä¸­é—´ä»¶ï¼Œå› ä¸ºæ¯ä¸ªä¸­é—´ä»¶éƒ½æœ‰ pre&post è°ƒç”¨ã€‚ä½œä¸ºæœ€ä½³å®è·µï¼Œæˆ‘ä¼šé€‰æ‹© 5 ä¸ªæœ€å¤§ä¸­é—´ä»¶ã€‚

# è·¯çº¿ç¼“å­˜:

æˆ‘å°†å¼•ç”¨ ionuÈ›Â·æ¯”è€¶æ–¯åº“åœ¨ä¸€ç¯‡æ–‡ç« ä¸­è¯´çš„è¯ï¼Œè¿™ç¯‡æ–‡ç« æ¯”æˆ‘ä»¥å‰è§£é‡Šå¾—æ›´å¥½

> åœ¨ laravelï¼Œè·¯ç”±ä¹Ÿæ˜¯ä¸€é¡¹æ˜‚è´µçš„ä»»åŠ¡ã€‚è¦ç¼“å­˜ routes.php æ–‡ä»¶ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤:
> 
> `*php artisan route:cache*`
> 
> è¯·æ³¨æ„ï¼Œå®ƒä¸é€‚ç”¨äºé—­åŒ…ã€‚å¦‚æœæ‚¨ä½¿ç”¨é—­åŒ…ï¼Œè¿™æ˜¯å°†å®ƒä»¬ç§»å…¥æ§åˆ¶å™¨çš„å¥½æœºä¼šï¼Œå› ä¸º artisan å‘½ä»¤ä¼šåœ¨è¯•å›¾ç¼–è¯‘ç»‘å®šåˆ°é—­åŒ…è€Œä¸æ˜¯æ­£ç¡®çš„æ§åˆ¶å™¨æ–¹æ³•çš„è·¯çº¿æ—¶æŠ›å‡ºå¼‚å¸¸ã€‚
> ä¸é…ç½®ç¼“å­˜ä¸€æ ·ï¼Œå¯¹ routes.php çš„ä»»ä½•æ›´æ”¹å°†ä¸å†æœ‰ä»»ä½•å½±å“ã€‚è¦åˆ·æ–°ç¼“å­˜ï¼Œè¯·åœ¨æ¯æ¬¡æ›´æ”¹ routes æ–‡ä»¶æ—¶è¿è¡Œä¸Šè¿°å‘½ä»¤ã€‚è¦å®Œå…¨æ¸…é™¤è·¯ç”±ç¼“å­˜ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤:
> 
> `*php artisan route:clear*`

[![](img/7fce355e1192b707d510fa8ae34d8fe3.png)](https://www.awin1.com/cread.php?s=2327751&v=6798&q=347896&r=628669)

# å…¶ä»– PHP ä¼˜åŒ–

å…¶ä»–ä¸€äº›å¯ä»¥æ˜¾è‘—æé«˜ç½‘ç«™é€Ÿåº¦çš„ä¸œè¥¿åŒ…æ‹¬:

*   é…ç½®ç¼“å­˜
*   ç±»åˆ«æ˜ å°„ä¼˜åŒ–
*   ä¼˜åŒ–åˆæˆå™¨è‡ªåŠ¨åŠ è½½

è¿™äº›ä¹Ÿå¯ä»¥åœ¨è¿™ç¯‡[æŠ€æœ¯ç»†èŠ‚æ–‡ç« ](https://bajescu.com/posts/view/improving-your-laravel-application-performance)ä¸­æŸ¥çœ‹ã€‚

æ ¹æ®æˆ‘çš„ç»éªŒï¼Œå¦‚æœä½ åšåˆ°äº†æ‰€æœ‰è¿™äº›ï¼Œè€Œä½ ä»¥å‰æ²¡æœ‰åšåˆ°ï¼Œä½ å°†ä¼šåœ¨ä½ çš„æœåŠ¡å™¨é¡µé¢åŠ è½½æ—¶é—´ä¸Šè·å¾— 20-50%çš„æå‡ã€‚

**ä»…ä¾›å‚è€ƒï¼Œä½ çœŸçš„åº”è¯¥ä¹°ä¸€ä¸ª** [**ç¨‹åºå‘˜ç¬”è®°æœ¬ç”µè„‘/å·¥ä½œç«™è´´çº¸**](http://tidd.ly/8f345c71) **ï¼Œå®ƒä»¬å¤ªæ£’äº†ğŸ˜ã€‚**

**å…¶ä»–æœ‰ç”¨çš„æ–‡ç« :**

*   [https://medium . com/tekno Muslim/simple-boost-laravel-performance-in-production-7e 5c 63 e 32 ffd](/teknomuslim/simply-boost-laravel-performance-in-production-7e5c63e32ffd)

![](img/9e47fe293d4de059bbccb4fef97b5ded.png)[![](img/308a8d84fb9b2fab43d66c117fcc4bb4.png)](https://medium.com/swlh)

## è¿™ä¸ªæ•…äº‹å‘è¡¨åœ¨ [The Startup](https://medium.com/swlh) ä¸Šï¼Œè¿™æ˜¯ Medium æœ€å¤§çš„ä¼ä¸šå®¶å‡ºç‰ˆç‰©ï¼Œæ‹¥æœ‰ 308ï¼Œ589+äººã€‚

## åœ¨è¿™é‡Œè®¢é˜…æ¥æ”¶[æˆ‘ä»¬çš„å¤´æ¡æ–°é—»](http://growthsupply.com/the-startup-newsletter/)ã€‚

[![](img/b0164736ea17a63403e660de5dedf91a.png)](https://medium.com/swlh)