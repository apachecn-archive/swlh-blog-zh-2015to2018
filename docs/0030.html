<html>
<head>
<title>Writing highly readable code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写可读性高的代码</h1>
<blockquote>原文：<a href="https://medium.com/swlh/writing-highly-readable-code-94da94d5d636?source=collection_archive---------0-----------------------#2015-07-29">https://medium.com/swlh/writing-highly-readable-code-94da94d5d636?source=collection_archive---------0-----------------------#2015-07-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f37f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们总是被告知注释我们的代码很重要。没有注释，其他开发人员将无法理解我们做了什么，我们未来的自己在做维护时将会恐惧退缩。</p><p id="bcdf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，可读的代码不仅仅是注释文本。更重要的是它的风格、结构和命名。如果你养成了写易读的代码的习惯，你会发现自己写的注释更少了。</p><p id="c4e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们取下面的代码片段，并优化它的可读性。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><p id="7a19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这段简洁而混乱的代码计算数组中每个用户记录的年龄，以年为单位。然后将他们的年龄添加到数组中的记录中以备后用。</p><p id="4f7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那么，我们能做些什么来使这些代码易于理解呢？</p><h2 id="9d40" class="jk jl hi bd jm jn jo jp jq jr js jt ju iq jv jw jx iu jy jz ka iy kb kc kd ke bi translated">风格</h2><p id="bca8" class="pw-post-body-paragraph if ig hi ih b ii kf ik il im kg io ip iq kh is it iu ki iw ix iy kj ja jb jc hb bi translated">第一步是纠正<a class="ae kk" href="https://en.wikipedia.org/wiki/Programming_style" rel="noopener ugc nofollow" target="_blank">代码样式</a>。样式可能因项目而异，但应始终包括关于缩进和间距的规则。</p><p id="492a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您正在开始一个新项目，或者能够将您的代码重构为预定义的样式，那么建议您使用一个公认的标准。对于PHP，最广为人知的标准是由<a class="ae kk" href="http://www.php-fig.org/psr/psr-1/" rel="noopener ugc nofollow" target="_blank"> PSR-1 </a>和<a class="ae kk" href="http://www.php-fig.org/psr/psr-2/" rel="noopener ugc nofollow" target="_blank"> PSR-2 </a>定义的。</p><p id="e3e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是代码缩进并适应最大80个字符的行长度后的样子。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><p id="1cbf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如您所见，代码可读性更好了。它还有一个额外的好处，就是更容易编辑。</p><h2 id="8d8b" class="jk jl hi bd jm jn jo jp jq jr js jt ju iq jv jw jx iu jy jz ka iy kb kc kd ke bi translated">结构</h2><p id="d787" class="pw-post-body-paragraph if ig hi ih b ii kf ik il im kg io ip iq kh is it iu ki iw ix iy kj ja jb jc hb bi translated">代码结构包括从存储源代码的目录树到使用的方法和库的所有内容。在可读性方面，重要的因素是<a class="ae kk" href="https://en.wikipedia.org/wiki/Abstraction_(computer_science)" rel="noopener ugc nofollow" target="_blank">抽象</a>，选择<a class="ae kk" href="http://php.net/manual/en/language.control-structures.php" rel="noopener ugc nofollow" target="_blank">控制结构</a>，数据结构和<a class="ae kk" href="http://programmers.stackexchange.com/questions/167777/why-should-one-use-a-single-use-temporary-variable" rel="noopener ugc nofollow" target="_blank">使用临时变量</a>。</p><p id="912c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，重构结构意味着将for循环改为foreach循环，并将年龄计算分成几个步骤。foreach循环中的值已被设置为按引用赋值，因此当值发生更改时，数组将会更新。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><p id="2638" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在可以很容易地看到年龄计算中涉及的各个步骤，以及结果存储在数组中的位置。通过使用foreach循环，在访问用户记录时不再需要使用额外的计数器变量。</p><p id="15e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一个可能的变化是创建一个函数或方法来执行年龄计算。尤其是在需要在<a class="ae kk" href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="noopener ugc nofollow" target="_blank">多个地方</a>计算年龄的较大项目中。</p><h2 id="b84e" class="jk jl hi bd jm jn jo jp jq jr js jt ju iq jv jw jx iu jy jz ka iy kb kc kd ke bi translated">命名</h2><p id="b8ba" class="pw-post-body-paragraph if ig hi ih b ii kf ik il im kg io ip iq kh is it iu ki iw ix iy kj ja jb jc hb bi translated">你一定听说过“<a class="ae kk" href="https://en.wikipedia.org/wiki/Self-documenting" rel="noopener ugc nofollow" target="_blank">自记录代码</a>”这个术语。到目前为止，最重要的因素是为变量和数据结构选择的名字。</p><p id="e50a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不要害怕使用更长的名字来提高可读性。好的文本编辑器和ide都有补全功能，所以较长的名字不会减慢你的速度。现代编程语言和数据库支持50个或更多字符的名称。再加上名称的上下文(表、名称空间、类等)，总有足够的空间来使用不缩写且有意义的名称。</p><p id="bf0e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们的例子中，用户记录使用的变量名和关键字可以通过使用反映其内容的名称来改进。记住，对于所有其他的命名，包括函数、类、属性和方法，也要应用同样的思想。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><p id="4f34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">代码的目的现在更容易理解了，因为我们可以一目了然地看到每个变量中包含的内容。</p><h2 id="87b4" class="jk jl hi bd jm jn jo jp jq jr js jt ju iq jv jw jx iu jy jz ka iy kb kc kd ke bi translated">评论</h2><p id="c13b" class="pw-post-body-paragraph if ig hi ih b ii kf ik il im kg io ip iq kh is it iu ki iw ix iy kj ja jb jc hb bi translated">注释应该用高层次的术语说明代码的预期结果。永远不要问代码在底层做什么。他们还应该记录任何乍一看可能不明显的副作用。</p><p id="4c3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，只需要一个注释来指定foreach循环正在做什么。users数组的注释已被删除，因为现在很容易看出该数组的用途。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><p id="9a1c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">回过头来，将这段代码与初始代码进行比较，看看它有多容易理解。</p><p id="6876" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您发现自己编写的代码更像早期的迭代之一，请留出时间来纠正它。随着代码库的增长，这种投资将获得数倍的回报。也考虑花时间重构现有代码。</p><p id="ebf4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">只要稍加练习和深思熟虑，你很快就会写出可读性很高的代码。</p><p id="41e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">编辑:瑞安·温彻斯特将代码<a class="ae kk" href="http://ryanwinchester.ca/post/refactoring-code-for-readability" rel="noopener ugc nofollow" target="_blank">向前推进了一步</a>，并且完全删除了注释的需要。另请参见大卫·罗莎对以下造型的不同看法。</p><p id="7a2d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">编辑:Freek Van der Herten采用了Ryan Winchester的代码，并对其进行了进一步的重构。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kl"><img src="../Images/71d955550911c61d0aef4c66a71f8e15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VLaJ04qsuIGx2MkIAZKDdQ.jpeg"/></div></div></figure><p id="7a3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ks">发表于</em> <strong class="ih kt">创业、旅游癖和生活黑客</strong></p><div class="jd je jf jg fd ab cb"><figure class="ku jh kv kw kx ky kz paragraph-image"><a href="http://supply.us9.list-manage.com/subscribe?u=310af6eb2240d299c7032ef6c&amp;id=d28d8861ad"><img src="../Images/f20f8a326d92cd024c2946c0427a85fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*n0RJ_1N2IHnMf__UQmUrWA.png"/></a></figure><figure class="ku jh kv kw kx ky kz paragraph-image"><a href="https://blog.growth.supply/"><img src="../Images/1b4fd39dd738a88ac13336ad93f1049c.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*qCnxaGPGC2_AOJ4c42Me6Q.png"/></a></figure><figure class="ku jh kv kw kx ky kz paragraph-image"><a href="https://twitter.com/swlh_"><img src="../Images/93f21657a8ed7c0f741216a91b53c713.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*WwLu636h144p49tOpbrj5g.png"/></a></figure></div><p id="02b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">-</p></div></div>    
</body>
</html>