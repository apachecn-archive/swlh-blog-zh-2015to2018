<html>
<head>
<title>Code Reviews Can Make or Break Your Team</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">代码评审可以成就或者毁灭你的团队</h1>
<blockquote>原文：<a href="https://medium.com/swlh/code-reviews-can-make-or-break-your-team-a3cfdcc15de1#2015-10-01">https://medium.com/swlh/code-reviews-can-make-or-break-your-team-a3cfdcc15de1#2015-10-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/4709bd2a2fdabbd43d8eb2e19c879bf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*GfMQuG4byrmAlu8nFWYkXw.jpeg"/></div></figure><p id="7580" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="jk">本文是科技招聘&amp;团队建设系列的第二篇。你可以在这里找到</em> <a class="ae jl" rel="noopener" href="/@ayasin/writing-software-is-an-art-f3ab53853344"> <em class="jk">第三期</em> </a> <em class="jk">。</em></p><p id="c2dc" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Alice刚刚完成了一些代码，需要对其进行审查，以便提交。</p><blockquote class="jm jn jo"><p id="ffba" class="im in jk io b ip iq ir is it iu iv iw jp iy iz ja jq jc jd je jr jg jh ji jj hb bi translated">“啊，又一次代码审查”~爱丽丝</p></blockquote><p id="9a71" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">首先，她必须安排一次会面。在会议上，每个人都围坐在一张桌子旁。Bob指出Alice的变量名对于命名约定来说太长了。杰克说爱丽丝需要使用两个空格而不是三个空格的制表位。Heather指出代码注释中有3个拼写错误，她不应该用介词结束句子。没有人注意到Alice将未初始化的SQL直接传递给数据库。</p><h2 id="19d0" class="js jt hi bd ju jv jw jx jy jz ka kb kc ix kd ke kf jb kg kh ki jf kj kk kl km bi translated">许多人因此害怕评论</h2><p id="b775" class="pw-post-body-paragraph im in hi io b ip kn ir is it ko iv iw ix kp iz ja jb kq jd je jf kr jh ji jj hb bi translated">我最近写了一篇非常受欢迎的<a class="ae jl" rel="noopener" href="/swlh/the-one-method-to-eliminate-bad-tech-hires-630d539b2e1d">文章，介绍了我用来淘汰糟糕的技术人员的方法</a>。【TL；博士付钱给候选人，让他们做一个简单的、独立的项目，然后像团队成员一样对项目进行审查]。关于它的大多数问题都围绕着两个中心主题:审查过程应该是什么，以及管理问题的机制。</p><p id="7469" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这篇文章中，我将通过讨论一个好的代码评审应该是什么样子来处理评审过程。我将主要讨论内部审核流程。因为您应该对编码挑战评审使用相同的过程，所以这些规则对两者都适用。</p><blockquote class="jm jn jo"><p id="7b12" class="im in jk io b ip iq ir is it iu iv iw jp iy iz ja jq jc jd je jr jg jh ji jj hb bi translated">我在业余时间淹死小猫</p></blockquote><p id="a707" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们从一个有点明显的观察开始:100%的候选人会告诉你他们支持代码评审。说不喜欢评论，等于说“我业余时间淹死小猫”。他们中的许多人在对你撒谎。为什么？因为他们有过可怕的代码评审经历，并且因为那些经历发生在他们很小的时候，他们认为那就是代码评审。希望这篇文章能帮助解决这个问题。</p><h2 id="0197" class="js jt hi bd ju jv jw jx jy jz ka kb kc ix kd ke kf jb kg kh ki jf kj kk kl km bi translated">回到爱丽丝身边</h2><p id="0580" class="pw-post-body-paragraph im in hi io b ip kn ir is it ko iv iw ix kp iz ja jb kq jd je jf kr jh ji jj hb bi translated">那么Alice在代码评审中的经历的最终结果是什么呢？</p><ul class=""><li id="df25" class="ks kt hi io b ip iq it iu ix ku jb kv jf kw jj kx ky kz la bi translated">Alice更关心变量名的长度，而不是它们在上下文中是否有意义。</li><li id="bfba" class="ks kt hi io b ip lb it lc ix ld jb le jf lf jj kx ky kz la bi translated">Alice停止在她的代码中添加注释，这样她就不必处理Heather“拼写和语法纳粹”的态度。</li><li id="0229" class="ks kt hi io b ip lb it lc ix ld jb le jf lf jj kx ky kz la bi translated">比起可读性，Alice更关心空格。</li></ul><p id="d6f3" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当然还有这个:</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es lg"><img src="../Images/c610bdf2bc01e2926cae3b17b5e7dcfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*P4nj9fJjSeJ9-c0rwSZqlg.png"/></div><figcaption class="ll lm et er es ln lo bd b be z dx">Image Credit: XKCD 327</figcaption></figure><h2 id="9a70" class="js jt hi bd ju jv jw jx jy jz ka kb kc ix kd ke kf jb kg kh ki jf kj kk kl km bi translated">好吧，但是代码审查有什么意义呢？</h2><p id="9d56" class="pw-post-body-paragraph im in hi io b ip kn ir is it ko iv iw ix kp iz ja jb kq jd je jf kr jh ji jj hb bi translated">代码评审有4个目的:</p><ol class=""><li id="4efb" class="ks kt hi io b ip iq it iu ix ku jb kv jf kw jj lp ky kz la bi translated">让团队中的每个人都变得更好</li><li id="baf0" class="ks kt hi io b ip lb it lc ix ld jb le jf lf jj lp ky kz la bi translated">让团队中的每个人都变得更好</li><li id="b462" class="ks kt hi io b ip lb it lc ix ld jb le jf lf jj lp ky kz la bi translated">让团队中的每个人都变得更好</li><li id="391c" class="ks kt hi io b ip lb it lc ix ld jb le jf lf jj lp ky kz la bi translated">在错误或代码气味变成bug或技术债务之前捕捉它们</li></ol><p id="c59f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这不是我忘记改变第二和第三个原因。前三个原因是一样的，因为它比你在代码评审中做的任何事情都重要。</p><blockquote class="jm jn jo"><p id="b066" class="im in jk io b ip iq ir is it iu iv iw jp iy iz ja jq jc jd je jr jg jh ji jj hb bi translated">让知识共享让每个人都变得更好</p></blockquote><p id="06a8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让团队中的每个人变得更好意味着每个人都理解代码库。每个人都理解数据流。每个人都理解背后的<em class="jk">推理，而不仅仅是</em>为什么事情是这样的<em class="jk">机制。至少有人在评论中学到了一些东西。这不一定是代码被评审的人。</em></p><p id="7990" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这可能不会总是发生，但它应该永远是目标。</p><h2 id="1fc3" class="js jt hi bd ju jv jw jx jy jz ka kb kc ix kd ke kf jb kg kh ki jf kj kk kl km bi translated">我们应该复习什么？</h2><p id="3d82" class="pw-post-body-paragraph im in hi io b ip kn ir is it ko iv iw ix kp iz ja jb kq jd je jf kr jh ji jj hb bi translated">一切。回顾不需要成为一个大的正式过程。找另外一两个人，检查一下你将要提交的内容，或者如果你遵循团队合并流程，检查一下你将要合并的内容。这可能发生在办公室、办公桌或视频通话中。</p><blockquote class="jm jn jo"><p id="2e4b" class="im in jk io b ip iq ir is it iu iv iw jp iy iz ja jq jc jd je jr jg jh ji jj hb bi translated">越小越好</p></blockquote><p id="cd9d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">小代码块比大代码块更容易审查。大量的代码吓跑了评审人员，原因有很多。除了更小的代码块更容易快速理解这一事实之外，你请来审查你的代码的人也需要完成他们自己的工作。小型代码评审尊重他们的时间。</p><h2 id="725f" class="js jt hi bd ju jv jw jx jy jz ka kb kc ix kd ke kf jb kg kh ki jf kj kk kl km bi translated">好的评论是什么样的？</h2><p id="84e3" class="pw-post-body-paragraph im in hi io b ip kn ir is it ko iv iw ix kp iz ja jb kq jd je jf kr jh ji jj hb bi translated">正确的代码审查应该遵循以下规则:</p><p id="a5e4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io lq"> 1 -不要讨论任何可以通过自动化过程(如代码格式化程序)解决的问题</strong></p><p id="110b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">只需运行格式化程序。不要浪费一口气谈论制表符间距或行长度。这种类型的讨论是没有成效的，会让人们对代码评审失去兴趣。</p><p id="8d73" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io lq"> 2 -不要讨论那些仅仅是“奴役一个过程”的事情</strong></p><p id="fe35" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这些可以是“变量必须少于8个字符”之类的东西。真的吗？这比一个明确的变量名更重要？由此推论，不要把每一个名字都说死。如果有道理，继续前进。如果一个4深度嵌套循环中的循环变量是counter_a、counter_b、counter_c和counter_d，那么这可能适合讨论。</p><p id="6a52" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io lq"> 3 -尽量保持简短</strong></p><p id="7186" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">简短的评论，无论是行数(如果可能的话，最多200-300行)还是分钟数，都能让你充分利用时间。其代码被评审的人应该说得最多(带你浏览代码，以及他们做出的任何设计决策)。如果你发现一个严重的问题，停止审查。让此人解决问题，然后继续。这样做的原因是，一个严重的问题可能会导致代码发生足够多的变化，无论如何都需要重新审查。</p><p id="c0dd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io lq"> 4 -讨论代码气味</strong></p><p id="133e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">代码味道是类似于JS文件中的“你为什么把一个函数附加到窗口”或者一些C++代码中的“你为什么使用malloc而不是new”。有正确的方式和错误的方式来挑战别人解释这样的决定。</p><p id="409b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="jk">错误方式</em></p><p id="3d65" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">叹气。你在这里想什么？这太可怕了。去解决这件事。</p><p id="d120" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="jk">正确的方式</em></p><p id="b41f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">你在这里使用的是malloc，通常我会使用new，因为我们对所有其他动态内存分配都使用new。如果有人稍后删除它而不是释放它，这将导致问题。你选择malloc而不是new有什么原因吗？</p><p id="5d00" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">可能有一个完全有效的原因，通过将其作为一个讨论来对待，您可能会学到一些东西(即使是您需要解释new和malloc之间的区别)。</p><p id="18bd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io lq"> 5 -讨论架构</strong></p><p id="7c25" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">确保以一致和正确的方式构建东西是非常重要的。这不仅有利于正在添加的代码，也有利于未来的雇佣。如果事情在架构方面是一致的，那么新人就更容易理解事情是如何组合在一起的。同样，以正确的方式做这件事也很重要(见上文)。</p><p id="9b9c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io lq"> 6 -寻找测试中不容易发现的错误</strong></p><p id="0f32" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">寻找错误，错误数据不仅会导致崩溃，还会导致存储损坏等。像传递给数据库的未初始化的SQL就是一个很好的例子。</p><h2 id="0e16" class="js jt hi bd ju jv jw jx jy jz ka kb kc ix kd ke kf jb kg kh ki jf kj kk kl km bi translated">摘要</h2><p id="c374" class="pw-post-body-paragraph im in hi io b ip kn ir is it ko iv iw ix kp iz ja jb kq jd je jf kr jh ji jj hb bi translated">代码评审应该像版本控制一样成为你的过程中不可或缺的一部分，但是你如何去做可以成就或者毁灭你的团队。它可以是分享和增加公共知识、创造坚实的产品并使彼此变得更好的奇妙手段，也可以是同行羞辱、殴打和欺凌的反乌托邦噩梦。上述规则有望让你更接近前者，而不是后者。</p><h2 id="87c0" class="js jt hi bd ju jv jw jx jy jz ka kb kc ix kd ke kf jb kg kh ki jf kj kk kl km bi translated">关于我</h2><p id="71ca" class="pw-post-body-paragraph im in hi io b ip kn ir is it ko iv iw ix kp iz ja jb kq jd je jf kr jh ji jj hb bi translated">我是Amir Yasin，是一名通晓多种语言的开发人员，对高性能、可伸缩性、软件架构和解决难题非常感兴趣。你可以<a class="ae jl" rel="noopener" href="/@ayasin">在Medium </a>上关注我，在那里我写了关于软件工程的博客，<a class="ae jl" href="https://twitter.com/ayasin" rel="noopener ugc nofollow" target="_blank">在Twitter </a>上关注我，在那里我偶尔会说一些有趣的事情，或者在GitHub 上查看<a class="ae jl" href="https://github.com/ayasin" rel="noopener ugc nofollow" target="_blank">我对自由/开源软件社区的贡献。</a></p><p id="d34d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io lq">如果你喜欢这篇文章，我会非常感谢你的推荐(点击下面的心脏)</strong>。</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="er es lr"><img src="../Images/c1192ebad88d6b1fc6ae1d6a2bc61154.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WJ6pLzJD9qnHRthas2vL-Q.jpeg"/></div></div></figure><p id="fa02" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="jk">发表于</em><a class="ae jl" href="https://medium.com/swlh" rel="noopener"><strong class="io lq"># SWLH</strong></a><strong class="io lq">(</strong>创业、流浪、生活黑客<strong class="io lq"> ) </strong></p><div class="lh li lj lk fd ab cb"><figure class="lw ij lx ly lz ma mb paragraph-image"><a href="http://supply.us9.list-manage.com/subscribe?u=310af6eb2240d299c7032ef6c&amp;id=d28d8861ad"><img src="../Images/de26c089e79a3a2a25d2b750ff6db50f.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*fSUxWFf6_qlAfAObKJuEAA.png"/></a></figure><figure class="lw ij lx ly lz ma mb paragraph-image"><a href="https://medium.com/swlh"><img src="../Images/f47a578114e0a96bdfabc3a5400688d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Me4fgEZDDb-d8j41O5oKaQ.png"/></a></figure><figure class="lw ij lx ly lz ma mb paragraph-image"><a href="https://twitter.com/swlh_"><img src="../Images/c1351daa9c4f0c8ac516addb60c82f6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*_DMWEyOz7IhTGGNb5tzA0g.png"/></a></figure></div><p id="fdc4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi">-</p></div></div>    
</body>
</html>