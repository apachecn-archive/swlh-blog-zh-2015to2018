<html>
<head>
<title>What Are The Pros And Cons Of Multi-tenancy In Rails Application?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Rails应用程序中多租户的优缺点是什么？</h1>
<blockquote>原文：<a href="https://medium.com/swlh/what-are-the-pros-and-cons-of-multi-tenancy-in-rails-application-547d0f9c205f?source=collection_archive---------2-----------------------#2017-10-03">https://medium.com/swlh/what-are-the-pros-and-cons-of-multi-tenancy-in-rails-application-547d0f9c205f?source=collection_archive---------2-----------------------#2017-10-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f8bea01119661dea4e9a5c26320fcb05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i88ZyYtgM33iGUx0NbF77g.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">What Are The Pros And Cons Of Multi-tenancy In Rails Application?</figcaption></figure><p id="9ec8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi js translated">这里有多种方法可以让T2开发一个网络应用来满足不同的需求。有时，在称为单租户的设置中，为每个客户安装一个单独的应用程序实例。而在多租户应用程序中，软件和支持基础设施的单个实例在多租户架构中为多个用户服务。在这里，每个客户或租户共享软件应用程序和一个数据库。在多租户架构中，应用程序旨在隔离配置和数据，以确保每个租户都使用定制的虚拟应用程序实例。一旦数据库中的数据被标记为属于某个用户或另一个用户，该软件足够智能，可以知道这些数据属于谁。</p><p id="5e00" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">多租户应用程序主要分为三类用户。拥有顶级访问权限的管理员，是拥有网站的客户。然后是经理，来自<a class="ae kb" href="https://www.datadab.com/" rel="noopener ugc nofollow" target="_blank">公司</a>的资源，他们在公司层面管理项目和用户，最后是这个应用程序的最终用户。根据用户的授权，用户可以访问每个页面。用户可以定制应用程序的某些部分，比如用户界面(UI)的颜色或业务规则，但是他们不能定制应用程序的代码。</p><h1 id="da0d" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">多租户的优势:</h1><ul class=""><li id="0526" class="la lb hi iw b ix lc jb ld jf le jj lf jn lg jr lh li lj lk bi translated">多租户通过在其客户端之间共享相同的电源资源和软件来降低成本。软件需要许可证和支持，如果您需要为每个客户购买许可证和支持，成本会增加，就像单租户的情况一样。共享基础设施将自动降低成本。</li><li id="c80d" class="la lb hi iw b ix ll jb lm jf ln jj lo jn lp jr lh li lj lk bi translated">在多租户应用程序中，您只需监控和管理单个平台，而不像单租户应用程序那样，您必须管理每个客户端的不同集合。通过这种方式，多租户SaaS提供商可以提供更高效的支持，包括问题解决和故障排除。</li><li id="9ebd" class="la lb hi iw b ix ll jb lm jf ln jj lo jn lp jr lh li lj lk bi translated">多租户体系结构将使您在需要更高的强度和功率时能够轻松增加容量。当您为平台引入新硬件时，整个系统的总容量会增加，并且变得更具可扩展性，不仅仅是针对单个客户端，而是针对所有关联的客户端。为单个客户端添加功能可使其对其他客户端可用。</li><li id="2de0" class="la lb hi iw b ix ll jb lm jf ln jj lo jn lp jr lh li lj lk bi translated">为多租户应用程序升级软件版本或系统资源非常容易，因为有一个集中的地方进行升级、安装等。</li></ul><h1 id="56dd" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">多租户的缺点:</h1><ul class=""><li id="95af" class="la lb hi iw b ix lc jb ld jf le jj lf jn lg jr lh li lj lk bi translated">与单租户应用相比，多租户应用在设置低级配置方面的灵活性较低。这对您来说可能不是问题，但如果您的应用程序需要为每个新租户进行大量定制，那么多租户应用程序可能不是最佳解决方案。</li><li id="3da5" class="la lb hi iw b ix ll jb lm jf ln jj lo jn lp jr lh li lj lk bi translated">多租户应用比同等的单租户应用更复杂，单租户应用的配置基本上是静态的。在单租户应用程序中，您不需要任何代码来检测web请求是针对哪个租户的，或者保护您的客户端免受租户之间的数据泄漏。日志格式更简单，因为日志与每个客户端的应用程序的单独实例分离。</li><li id="ca9c" class="la lb hi iw b ix ll jb lm jf ln jj lo jn lp jr lh li lj lk bi translated">由于多租户应用程序由运行在单个服务器上的单个数据库支持，因此容易出现故障的地方较少，但是这些故障点可能会造成更大的灾难。与单租户应用程序实例中断不同，当多租户应用程序的数据库不可用时，所有租户都会失去服务。它会拖垮一个租户。其他实例继续不受影响。</li></ul><h1 id="1212" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">如何创建多租户Rails应用程序？</h1><p id="8086" class="pw-post-body-paragraph iu iv hi iw b ix lc iz ja jb ld jd je jf lq jh ji jj lr jl jm jn ls jp jq jr hb bi translated">Apartment是一个顶级的Ruby库，以分离租户数据而闻名。简单地说，您可以使用Apartment创建租户，对于每个租户，库将自动分配一个新的隔离模式。使用Apartment也可以创建独立的数据库实例。Apartment将为您提供工具，帮助您在Rails应用程序中处理多个租户。虽然仍然允许一些数据存在于一个公共租户中，但如果您需要基于公司或帐户隔离某些数据，Apartment可以提供帮助。Apartment将允许你从一开始就使用部分或全部白色标签来构建基于Rails的SaaS应用程序。为了充分利用Apartment，可以考虑使用PostgreSQL数据库。</p><p id="f7d7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">公寓是如何运作的？Apartment从对应于电梯的模式中获取数据:域、子域或完整的主机名。使用这些电梯，图书馆分析每个对数据库的请求。默认情况下，公寓通过子域隔离租户，但您可以设置它来快速使用域。请记住，对于共享模式，Apartment不起作用。您的开发团队只需要为租户分配id，并使用这些id发送数据库请求来实现共享模式方法，如果您要为客户端提供子域或自定义域，则需要Detectify。对于现代的基于Rails的SaaS应用程序，你会想要更多的灵活性。这就是Detectify的用武之地。Detectify可以使用子域和域构建数据库请求。Detectify在向数据库发送基于URL的请求时，也会让应用程序忽略路线。总的来说，Detectify被证明是比Houser更先进的多租户gem。</p><h1 id="1a1d" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">结论:</h1><blockquote class="lt"><p id="7704" class="lu lv hi hj lw lx ly lz ma mb mc jr dx translated">多租户通常是一个被误解和误用的术语。多租户是一种架构方法，允许多个组织或用户(也称为租户)共享应用程序的单个实例，仅适用于SaaS。这里的核心原则是，共享的是应用程序的单个实例。因此，多实例架构不同于多租户架构。</p></blockquote><p id="4ef2" class="pw-post-body-paragraph iu iv hi iw b ix md iz ja jb me jd je jf mf jh ji jj mg jl jm jn mh jp jq jr hb bi translated">任何设计糟糕的东西都不会完美地工作，但是在大多数情况下，设计糟糕的多租户不会给你带来任何好处。这是因为设计不佳的多租户会影响自动化等，从而阻碍it的核心功能，即降低运营成本。使用Rails开发多租户<a class="ae kb" href="https://www.cognitiveclouds.com/custom-software-development-services/saas-application-development-company" rel="noopener ugc nofollow" target="_blank">软件即服务应用</a>不仅仅是设计数据库层。如果您在一开始就选择了完美的数据库架构，那么从长远来看，开发、扩展和支持您的web应用程序将会容易得多。</p></div><div class="ab cl mi mj gp mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="hb hc hd he hf"><p id="0954" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="mp">最初发表于CognitiveClouds的产品洞察博客:Top </em> <a class="ae kb" href="https://www.cognitiveclouds.com/custom-software-development-services/ruby-on-rails-development-company" rel="noopener ugc nofollow" target="_blank"> <strong class="iw mq"> <em class="mp"> Ruby on Rails开发公司</em> </strong> </a></p><figure class="ms mt mu mv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mr"><img src="../Images/731acf26f5d44fdc58d99a6388fe935d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6gfnVvkMRFtjVsWF7vkClA.png"/></div></div></figure><h2 id="fd41" class="mw kd hi bd ke mx my mz ki na nb nc km jf nd ne kq jj nf ng ku jn nh ni ky nj bi translated">这个故事发表在<a class="ae kb" href="https://medium.com/swlh" rel="noopener"> The Startup </a>上，这是Medium最大的企业家出版物，拥有293，189+人。</h2><h2 id="7945" class="mw kd hi bd ke mx my mz ki na nb nc km jf nd ne kq jj nf ng ku jn nh ni ky nj bi translated">在此订阅接收<a class="ae kb" href="http://growthsupply.com/the-startup-newsletter/" rel="noopener ugc nofollow" target="_blank">我们的头条新闻</a>。</h2><figure class="ms mt mu mv fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mr"><img src="../Images/731acf26f5d44fdc58d99a6388fe935d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6gfnVvkMRFtjVsWF7vkClA.png"/></div></div></figure></div></div>    
</body>
</html>